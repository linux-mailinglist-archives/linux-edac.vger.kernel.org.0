Return-Path: <linux-edac-owner@vger.kernel.org>
X-Original-To: lists+linux-edac@lfdr.de
Delivered-To: lists+linux-edac@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id 475832D822
	for <lists+linux-edac@lfdr.de>; Wed, 29 May 2019 10:46:15 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726162AbfE2Iod (ORCPT <rfc822;lists+linux-edac@lfdr.de>);
        Wed, 29 May 2019 04:44:33 -0400
Received: from mx0b-0016f401.pphosted.com ([67.231.156.173]:49488 "EHLO
        mx0b-0016f401.pphosted.com" rhost-flags-OK-OK-OK-OK)
        by vger.kernel.org with ESMTP id S1726186AbfE2Ioc (ORCPT
        <rfc822;linux-edac@vger.kernel.org>);
        Wed, 29 May 2019 04:44:32 -0400
Received: from pps.filterd (m0045851.ppops.net [127.0.0.1])
        by mx0b-0016f401.pphosted.com (8.16.0.27/8.16.0.27) with SMTP id x4T8e8UZ018011;
        Wed, 29 May 2019 01:44:23 -0700
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=marvell.com; h=from : to : cc :
 subject : date : message-id : references : in-reply-to : content-type :
 content-transfer-encoding : mime-version; s=pfpt0818;
 bh=4wF3SPUyGPHoCx3EBCyYWxuZWb/bDs+k4pi0b8sR4Mg=;
 b=qcn5VQM2qW6+xNlLS/DPHFi9gILnPsddUizRZ/yTORzlBVoHGnGC17SrQYdbPpCCc7j6
 Zm81mP6b+k66ne8PYxQJnyzBmtggo3M3KQamIlgZwYIy6pakqC4VSiHi0tJAivTTkTwN
 XS5oR7BhLP2hsqL9OjpKgygWz/e9T6djtSh0pTeWWAvE8lnzrebb0OhZM7xclah6/JNK
 KM9nX7GkgxeZhBtUcHtaRA2Xlm8u6zzcm0PFkgA5G3BROzDsWjX4VX7wpiTyr3k9qLHo
 N30XftJRWRB9lJcsbma+yfxkG6kPwbgv0CAMQ8TW3IcA4ppjteG/hsalX4m91M9xRRgO 9A== 
Received: from sc-exch04.marvell.com ([199.233.58.184])
        by mx0b-0016f401.pphosted.com with ESMTP id 2sskp88p51-1
        (version=TLSv1.2 cipher=ECDHE-RSA-AES256-SHA384 bits=256 verify=NOT);
        Wed, 29 May 2019 01:44:23 -0700
Received: from SC-EXCH02.marvell.com (10.93.176.82) by SC-EXCH04.marvell.com
 (10.93.176.84) with Microsoft SMTP Server (TLS) id 15.0.1367.3; Wed, 29 May
 2019 01:44:22 -0700
Received: from NAM03-CO1-obe.outbound.protection.outlook.com (104.47.40.54) by
 SC-EXCH02.marvell.com (10.93.176.82) with Microsoft SMTP Server (TLS) id
 15.0.1367.3 via Frontend Transport; Wed, 29 May 2019 01:44:21 -0700
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=marvell.onmicrosoft.com; s=selector2-marvell-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=4wF3SPUyGPHoCx3EBCyYWxuZWb/bDs+k4pi0b8sR4Mg=;
 b=Uou4UDHgrPb3DwICWHh6K0DIBjbs02dMpjq+gHNuv/G4jYchXs/CUqoHJ+mroppMMfiOXfcznfcHKDnE+9ueC2HAH7Y9YCquyklFUT5QI0r+YH/CE6bgyKk3OnBjB+xO/JP/V/1OLmCh/gEAowzxzC/ZDYB7bUIg62/FQCt8/XU=
Received: from MN2PR18MB3408.namprd18.prod.outlook.com (10.255.238.217) by
 MN2PR18MB3437.namprd18.prod.outlook.com (10.255.239.22) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.1922.20; Wed, 29 May 2019 08:44:20 +0000
Received: from MN2PR18MB3408.namprd18.prod.outlook.com
 ([fe80::7c9a:f3bf:fe2e:fe4a]) by MN2PR18MB3408.namprd18.prod.outlook.com
 ([fe80::7c9a:f3bf:fe2e:fe4a%4]) with mapi id 15.20.1922.021; Wed, 29 May 2019
 08:44:20 +0000
From:   Robert Richter <rrichter@marvell.com>
To:     Borislav Petkov <bp@alien8.de>, Tony Luck <tony.luck@intel.com>,
        "James Morse" <james.morse@arm.com>,
        Mauro Carvalho Chehab <mchehab@kernel.org>
CC:     "linux-edac@vger.kernel.org" <linux-edac@vger.kernel.org>,
        "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>,
        Robert Richter <rrichter@marvell.com>
Subject: [PATCH 07/21] EDAC, mc: Remove per layer counters
Thread-Topic: [PATCH 07/21] EDAC, mc: Remove per layer counters
Thread-Index: AQHVFfq1pJPJBRznJ0WhfJ4esVhWBA==
Date:   Wed, 29 May 2019 08:44:20 +0000
Message-ID: <20190529084344.28562-8-rrichter@marvell.com>
References: <20190529084344.28562-1-rrichter@marvell.com>
In-Reply-To: <20190529084344.28562-1-rrichter@marvell.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: AM6PR01CA0046.eurprd01.prod.exchangelabs.com
 (2603:10a6:20b:e0::23) To MN2PR18MB3408.namprd18.prod.outlook.com
 (2603:10b6:208:16c::25)
x-ms-exchange-messagesentrepresentingtype: 1
x-mailer: git-send-email 2.20.1
x-originating-ip: [78.54.13.57]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 78148fda-38bc-437a-1a2e-08d6e411d74f
x-microsoft-antispam: BCL:0;PCL:0;RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(2017052603328)(7193020);SRVR:MN2PR18MB3437;
x-ms-traffictypediagnostic: MN2PR18MB3437:
x-microsoft-antispam-prvs: <MN2PR18MB3437A2552B2DE7FF1D38D0C5D91F0@MN2PR18MB3437.namprd18.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:2582;
x-forefront-prvs: 0052308DC6
x-forefront-antispam-report: SFV:NSPM;SFS:(10009020)(366004)(346002)(396003)(376002)(39860400002)(136003)(189003)(199004)(8936002)(4326008)(53936002)(50226002)(110136005)(107886003)(68736007)(36756003)(5660300002)(54906003)(11346002)(26005)(186003)(52116002)(2906002)(2616005)(476003)(446003)(6506007)(14454004)(66476007)(25786009)(478600001)(386003)(86362001)(486006)(81166006)(81156014)(8676002)(305945005)(316002)(7736002)(256004)(99286004)(76176011)(6512007)(6436002)(73956011)(64756008)(66446008)(30864003)(66556008)(66066001)(3846002)(66946007)(1076003)(6486002)(102836004)(71190400001)(71200400001)(6116002);DIR:OUT;SFP:1101;SCL:1;SRVR:MN2PR18MB3437;H:MN2PR18MB3408.namprd18.prod.outlook.com;FPR:;SPF:None;LANG:en;PTR:InfoNoRecords;MX:1;A:1;
received-spf: None (protection.outlook.com: marvell.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: 4jymGFlb2MBTHG/rOt+bDNyOf4L17044qxN/P2kopUnvygTY2GqcWNMDEYzV1HsnWC0CkzR1GpZynpA6deNTI6rj0lDQrBin7K2mgzCQ/J+YrslDZEetIIgO94ciSnrk1P4Nhs6oWVa4hhsqXpb2KO9hVj123UK5Vvf8snMHzzUnQxukDALmYS+fVGx+9Im3DZEjKita4ERDn0wUTu4H6T8an0LX5TzyRsVErxLVZ/4vgomAtt3KfzTzxoXoGZgK0G1xNop3bOcFHGqSdt/w5GStwNZvbLBUcucruGdRLWi12UGqBZm9cZYG6Pvp3SSaKs6W7OIEXwo/ogA+u2hvq+i+OlU4DMbGB6EVB57oq9Zf5sC3U+Xie0lqKzdgFusBhu7NCsukA34eyN7g7sHT2AhDiUtBsr1uW0UPRH8v7B8=
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-MS-Exchange-CrossTenant-Network-Message-Id: 78148fda-38bc-437a-1a2e-08d6e411d74f
X-MS-Exchange-CrossTenant-originalarrivaltime: 29 May 2019 08:44:20.1929
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 70e1fb47-1155-421d-87fc-2e58f638b6e0
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: rrichter@marvell.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR18MB3437
X-OriginatorOrg: marvell.com
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10434:,, definitions=2019-05-29_05:,,
 signatures=0
Sender: linux-edac-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-edac.vger.kernel.org>
X-Mailing-List: linux-edac@vger.kernel.org

TG9va2luZyBhdCBob3cgbWNpLT57dWUsY2V9X3Blcl9sYXllcltFREFDX01BWF9MQVlFUlNdIGlz
IHVzZWQsIGl0DQp0dXJucyBvdXQgdGhhdCBvbmx5IHRoZSBsZWF2ZXMgaW4gdGhlIG1lbW9yeSBo
aWVyYXJjaHkgYXJlIGNvbnN1bWVkDQooaW4gc3lzZnMpLCBidXQgbm90IHRoZSBpbnRlcm1lZGlh
dGUgbGF5ZXJzLCBlLmcuOg0KDQogY291bnQgPSBkaW1tLT5tY2ktPmNlX3Blcl9sYXllcltkaW1t
LT5tY2ktPm5fbGF5ZXJzLTFdW2RpbW0tPmlkeF07DQoNClNvIGxldCdzIGdldCByaWQgb2YgdGhl
IHVudXNlZCBjb3VudGVycyB0aGF0IGp1c3QgYWRkIGNvbXBsZXhpdHkuDQoNCkVycm9yIGNvdW50
ZXIgdmFsdWVzIGFyZSBkaXJlY3RseSBzdG9yZWQgaW4gc3RydWN0IGRpbW1faW5mbyBub3cuDQoN
ClNpZ25lZC1vZmYtYnk6IFJvYmVydCBSaWNodGVyIDxycmljaHRlckBtYXJ2ZWxsLmNvbT4NCi0t
LQ0KIGRyaXZlcnMvZWRhYy9lZGFjX21jLmMgICAgICAgfCA5OCArKysrKysrKysrKystLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NCiBkcml2ZXJzL2VkYWMvZWRhY19tY19zeXNmcy5jIHwgMTcgKyst
LS0tLQ0KIGRyaXZlcnMvZWRhYy9naGVzX2VkYWMuYyAgICAgfCAgNSArLQ0KIGluY2x1ZGUvbGlu
dXgvZWRhYy5oICAgICAgICAgfCAgNyArKy0NCiA0IGZpbGVzIGNoYW5nZWQsIDM5IGluc2VydGlv
bnMoKyksIDg4IGRlbGV0aW9ucygtKQ0KDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9lZGFjL2VkYWNf
bWMuYyBiL2RyaXZlcnMvZWRhYy9lZGFjX21jLmMNCmluZGV4IGE4NDk5OTNhOGRjZC4uMmU0NjFj
OWUxYTg5IDEwMDY0NA0KLS0tIGEvZHJpdmVycy9lZGFjL2VkYWNfbWMuYw0KKysrIGIvZHJpdmVy
cy9lZGFjL2VkYWNfbWMuYw0KQEAgLTMxMywxMCArMzEzLDkgQEAgc3RydWN0IG1lbV9jdGxfaW5m
byAqZWRhY19tY19hbGxvYyh1bnNpZ25lZCBtY19udW0sDQogCXN0cnVjdCBjc3Jvd19pbmZvICpj
c3I7DQogCXN0cnVjdCByYW5rX2luZm8gKmNoYW47DQogCXN0cnVjdCBkaW1tX2luZm8gKmRpbW07
DQotCXUzMiAqY2VfcGVyX2xheWVyW0VEQUNfTUFYX0xBWUVSU10sICp1ZV9wZXJfbGF5ZXJbRURB
Q19NQVhfTEFZRVJTXTsNCiAJdW5zaWduZWQgcG9zW0VEQUNfTUFYX0xBWUVSU107DQotCXVuc2ln
bmVkIHNpemUsIHRvdF9kaW1tcyA9IDEsIGNvdW50ID0gMTsNCi0JdW5zaWduZWQgdG90X2Nzcm93
cyA9IDEsIHRvdF9jaGFubmVscyA9IDEsIHRvdF9lcnJjb3VudCA9IDA7DQorCXVuc2lnbmVkIHNp
emUsIHRvdF9kaW1tcyA9IDE7DQorCXVuc2lnbmVkIHRvdF9jc3Jvd3MgPSAxLCB0b3RfY2hhbm5l
bHMgPSAxOw0KIAl2b2lkICpwdnQsICpwLCAqcHRyID0gTlVMTDsNCiAJaW50IGlkeCwgaSwgaiwg
cm93LCBjaG4sIG4sIGxlbjsNCiAJYm9vbCBwZXJfcmFuayA9IGZhbHNlOw0KQEAgLTM0MiwxOSAr
MzQxLDEwIEBAIHN0cnVjdCBtZW1fY3RsX2luZm8gKmVkYWNfbWNfYWxsb2ModW5zaWduZWQgbWNf
bnVtLA0KIAkgKiBzdHJpbmdlbnQgYXMgd2hhdCB0aGUgY29tcGlsZXIgd291bGQgcHJvdmlkZSBp
ZiB3ZSBjb3VsZCBzaW1wbHkNCiAJICogaGFyZGNvZGUgZXZlcnl0aGluZyBpbnRvIGEgc2luZ2xl
IHN0cnVjdC4NCiAJICovDQotCW1jaSA9IGVkYWNfYWxpZ25fcHRyKCZwdHIsIHNpemVvZigqbWNp
KSwgMSk7DQotCWxheWVyID0gZWRhY19hbGlnbl9wdHIoJnB0ciwgc2l6ZW9mKCpsYXllciksIG5f
bGF5ZXJzKTsNCi0JZm9yIChpID0gMDsgaSA8IG5fbGF5ZXJzOyBpKyspIHsNCi0JCWNvdW50ICo9
IGxheWVyc1tpXS5zaXplOw0KLQkJZWRhY19kYmcoNCwgImVycmNvdW50IGxheWVyICVkIHNpemUg
JWRcbiIsIGksIGNvdW50KTsNCi0JCWNlX3Blcl9sYXllcltpXSA9IGVkYWNfYWxpZ25fcHRyKCZw
dHIsIHNpemVvZih1MzIpLCBjb3VudCk7DQotCQl1ZV9wZXJfbGF5ZXJbaV0gPSBlZGFjX2FsaWdu
X3B0cigmcHRyLCBzaXplb2YodTMyKSwgY291bnQpOw0KLQkJdG90X2VycmNvdW50ICs9IDIgKiBj
b3VudDsNCi0JfQ0KLQ0KLQllZGFjX2RiZyg0LCAiYWxsb2NhdGluZyAlZCBlcnJvciBjb3VudGVy
c1xuIiwgdG90X2VycmNvdW50KTsNCi0JcHZ0ID0gZWRhY19hbGlnbl9wdHIoJnB0ciwgc3pfcHZ0
LCAxKTsNCi0Jc2l6ZSA9ICgodW5zaWduZWQgbG9uZylwdnQpICsgc3pfcHZ0Ow0KKwltY2kJPSBl
ZGFjX2FsaWduX3B0cigmcHRyLCBzaXplb2YoKm1jaSksIDEpOw0KKwlsYXllcgk9IGVkYWNfYWxp
Z25fcHRyKCZwdHIsIHNpemVvZigqbGF5ZXIpLCBuX2xheWVycyk7DQorCXB2dAk9IGVkYWNfYWxp
Z25fcHRyKCZwdHIsIHN6X3B2dCwgMSk7DQorCXNpemUJPSAoKHVuc2lnbmVkIGxvbmcpcHZ0KSAr
IHN6X3B2dDsNCiANCiAJZWRhY19kYmcoMSwgImFsbG9jYXRpbmcgJXUgYnl0ZXMgZm9yIG1jaSBk
YXRhICglZCAlcywgJWQgY3Nyb3dzL2NoYW5uZWxzKVxuIiwNCiAJCSBzaXplLA0KQEAgLTM3MCwx
MCArMzYwLDYgQEAgc3RydWN0IG1lbV9jdGxfaW5mbyAqZWRhY19tY19hbGxvYyh1bnNpZ25lZCBt
Y19udW0sDQogCSAqIHJhdGhlciB0aGFuIGFuIGltYWdpbmFyeSBjaHVuayBvZiBtZW1vcnkgbG9j
YXRlZCBhdCBhZGRyZXNzIDAuDQogCSAqLw0KIAlsYXllciA9IChzdHJ1Y3QgZWRhY19tY19sYXll
ciAqKSgoKGNoYXIgKiltY2kpICsgKCh1bnNpZ25lZCBsb25nKWxheWVyKSk7DQotCWZvciAoaSA9
IDA7IGkgPCBuX2xheWVyczsgaSsrKSB7DQotCQltY2ktPmNlX3Blcl9sYXllcltpXSA9ICh1MzIg
KikoKGNoYXIgKiltY2kgKyAoKHVuc2lnbmVkIGxvbmcpY2VfcGVyX2xheWVyW2ldKSk7DQotCQlt
Y2ktPnVlX3Blcl9sYXllcltpXSA9ICh1MzIgKikoKGNoYXIgKiltY2kgKyAoKHVuc2lnbmVkIGxv
bmcpdWVfcGVyX2xheWVyW2ldKSk7DQotCX0NCiAJcHZ0ID0gc3pfcHZ0ID8gKCgoY2hhciAqKW1j
aSkgKyAoKHVuc2lnbmVkIGxvbmcpcHZ0KSkgOiBOVUxMOw0KIA0KIAkvKiBzZXR1cCBpbmRleCBh
bmQgdmFyaW91cyBpbnRlcm5hbCBwb2ludGVycyAqLw0KQEAgLTkwMyw1MyArODg5LDMxIEBAIGNv
bnN0IGNoYXIgKmVkYWNfbGF5ZXJfbmFtZVtdID0gew0KIEVYUE9SVF9TWU1CT0xfR1BMKGVkYWNf
bGF5ZXJfbmFtZSk7DQogDQogc3RhdGljIHZvaWQgZWRhY19pbmNfY2VfZXJyb3Ioc3RydWN0IG1l
bV9jdGxfaW5mbyAqbWNpLA0KLQkJCSAgICAgIGJvb2wgZW5hYmxlX3Blcl9sYXllcl9yZXBvcnQs
DQogCQkJICAgICAgY29uc3QgaW50IHBvc1tFREFDX01BWF9MQVlFUlNdLA0KIAkJCSAgICAgIGNv
bnN0IHUxNiBjb3VudCkNCiB7DQotCWludCBpLCBpbmRleCA9IDA7DQorCXN0cnVjdCBkaW1tX2lu
Zm8gKmRpbW0gPSBlZGFjX2dldF9kaW1tKG1jaSwgcG9zWzBdLCBwb3NbMV0sIHBvc1syXSk7DQog
DQogCW1jaS0+Y2VfbWMgKz0gY291bnQ7DQogDQotCWlmICghZW5hYmxlX3Blcl9sYXllcl9yZXBv
cnQpIHsNCisJaWYgKGRpbW0pDQorCQlkaW1tLT5jZV9jb3VudCArPSBjb3VudDsNCisJZWxzZQ0K
IAkJbWNpLT5jZV9ub2luZm9fY291bnQgKz0gY291bnQ7DQotCQlyZXR1cm47DQotCX0NCi0NCi0J
Zm9yIChpID0gMDsgaSA8IG1jaS0+bl9sYXllcnM7IGkrKykgew0KLQkJaWYgKHBvc1tpXSA8IDAp
DQotCQkJYnJlYWs7DQotCQlpbmRleCArPSBwb3NbaV07DQotCQltY2ktPmNlX3Blcl9sYXllcltp
XVtpbmRleF0gKz0gY291bnQ7DQotDQotCQlpZiAoaSA8IG1jaS0+bl9sYXllcnMgLSAxKQ0KLQkJ
CWluZGV4ICo9IG1jaS0+bGF5ZXJzW2kgKyAxXS5zaXplOw0KLQl9DQogfQ0KIA0KIHN0YXRpYyB2
b2lkIGVkYWNfaW5jX3VlX2Vycm9yKHN0cnVjdCBtZW1fY3RsX2luZm8gKm1jaSwNCi0JCQkJICAg
IGJvb2wgZW5hYmxlX3Blcl9sYXllcl9yZXBvcnQsDQogCQkJCSAgICBjb25zdCBpbnQgcG9zW0VE
QUNfTUFYX0xBWUVSU10sDQogCQkJCSAgICBjb25zdCB1MTYgY291bnQpDQogew0KLQlpbnQgaSwg
aW5kZXggPSAwOw0KKwlzdHJ1Y3QgZGltbV9pbmZvICpkaW1tID0gZWRhY19nZXRfZGltbShtY2ks
IHBvc1swXSwgcG9zWzFdLCBwb3NbMl0pOw0KIA0KIAltY2ktPnVlX21jICs9IGNvdW50Ow0KIA0K
LQlpZiAoIWVuYWJsZV9wZXJfbGF5ZXJfcmVwb3J0KSB7DQorCWlmIChkaW1tKQ0KKwkJZGltbS0+
dWVfY291bnQgKz0gY291bnQ7DQorCWVsc2UNCiAJCW1jaS0+dWVfbm9pbmZvX2NvdW50ICs9IGNv
dW50Ow0KLQkJcmV0dXJuOw0KLQl9DQotDQotCWZvciAoaSA9IDA7IGkgPCBtY2ktPm5fbGF5ZXJz
OyBpKyspIHsNCi0JCWlmIChwb3NbaV0gPCAwKQ0KLQkJCWJyZWFrOw0KLQkJaW5kZXggKz0gcG9z
W2ldOw0KLQkJbWNpLT51ZV9wZXJfbGF5ZXJbaV1baW5kZXhdICs9IGNvdW50Ow0KLQ0KLQkJaWYg
KGkgPCBtY2ktPm5fbGF5ZXJzIC0gMSkNCi0JCQlpbmRleCAqPSBtY2ktPmxheWVyc1tpICsgMV0u
c2l6ZTsNCi0JfQ0KIH0NCiANCiBzdGF0aWMgdm9pZCBlZGFjX2NlX2Vycm9yKHN0cnVjdCBtZW1f
Y3RsX2luZm8gKm1jaSwNCkBAIC05NjAsNyArOTI0LDYgQEAgc3RhdGljIHZvaWQgZWRhY19jZV9l
cnJvcihzdHJ1Y3QgbWVtX2N0bF9pbmZvICptY2ksDQogCQkJICBjb25zdCBjaGFyICpsYWJlbCwN
CiAJCQkgIGNvbnN0IGNoYXIgKmRldGFpbCwNCiAJCQkgIGNvbnN0IGNoYXIgKm90aGVyX2RldGFp
bCwNCi0JCQkgIGNvbnN0IGJvb2wgZW5hYmxlX3Blcl9sYXllcl9yZXBvcnQsDQogCQkJICBjb25z
dCB1bnNpZ25lZCBsb25nIHBhZ2VfZnJhbWVfbnVtYmVyLA0KIAkJCSAgY29uc3QgdW5zaWduZWQg
bG9uZyBvZmZzZXRfaW5fcGFnZSwNCiAJCQkgIGxvbmcgZ3JhaW4pDQpAQCAtOTgzLDcgKzk0Niw3
IEBAIHN0YXRpYyB2b2lkIGVkYWNfY2VfZXJyb3Ioc3RydWN0IG1lbV9jdGxfaW5mbyAqbWNpLA0K
IAkJCQkgICAgICAgZXJyb3JfY291bnQsIG1zZywgbXNnX2F1eCwgbGFiZWwsDQogCQkJCSAgICAg
ICBsb2NhdGlvbiwgZGV0YWlsKTsNCiAJfQ0KLQllZGFjX2luY19jZV9lcnJvcihtY2ksIGVuYWJs
ZV9wZXJfbGF5ZXJfcmVwb3J0LCBwb3MsIGVycm9yX2NvdW50KTsNCisJZWRhY19pbmNfY2VfZXJy
b3IobWNpLCBwb3MsIGVycm9yX2NvdW50KTsNCiANCiAJaWYgKG1jaS0+c2NydWJfbW9kZSA9PSBT
Q1JVQl9TV19TUkMpIHsNCiAJCS8qDQpAQCAtMTAxMyw4ICs5NzYsNyBAQCBzdGF0aWMgdm9pZCBl
ZGFjX3VlX2Vycm9yKHN0cnVjdCBtZW1fY3RsX2luZm8gKm1jaSwNCiAJCQkgIGNvbnN0IGNoYXIg
KmxvY2F0aW9uLA0KIAkJCSAgY29uc3QgY2hhciAqbGFiZWwsDQogCQkJICBjb25zdCBjaGFyICpk
ZXRhaWwsDQotCQkJICBjb25zdCBjaGFyICpvdGhlcl9kZXRhaWwsDQotCQkJICBjb25zdCBib29s
IGVuYWJsZV9wZXJfbGF5ZXJfcmVwb3J0KQ0KKwkJCSAgY29uc3QgY2hhciAqb3RoZXJfZGV0YWls
KQ0KIHsNCiAJY2hhciAqbXNnX2F1eCA9ICIiOw0KIA0KQEAgLTEwNDMsNyArMTAwNSw3IEBAIHN0
YXRpYyB2b2lkIGVkYWNfdWVfZXJyb3Ioc3RydWN0IG1lbV9jdGxfaW5mbyAqbWNpLA0KIAkJCSAg
ICAgIG1zZywgbXNnX2F1eCwgbGFiZWwsIGxvY2F0aW9uLCBkZXRhaWwpOw0KIAl9DQogDQotCWVk
YWNfaW5jX3VlX2Vycm9yKG1jaSwgZW5hYmxlX3Blcl9sYXllcl9yZXBvcnQsIHBvcywgZXJyb3Jf
Y291bnQpOw0KKwllZGFjX2luY191ZV9lcnJvcihtY2ksIHBvcywgZXJyb3JfY291bnQpOw0KIH0N
CiANCiB2b2lkIGVkYWNfcmF3X21jX2hhbmRsZV9lcnJvcihjb25zdCBlbnVtIGh3X2V2ZW50X21j
X2Vycl90eXBlIHR5cGUsDQpAQCAtMTA1OSwxNiArMTAyMSwxNiBAQCB2b2lkIGVkYWNfcmF3X21j
X2hhbmRsZV9lcnJvcihjb25zdCBlbnVtIGh3X2V2ZW50X21jX2Vycl90eXBlIHR5cGUsDQogCQkJ
InBhZ2U6MHglbHggb2Zmc2V0OjB4JWx4IGdyYWluOiVsZCBzeW5kcm9tZToweCVseCIsDQogCQkJ
ZS0+cGFnZV9mcmFtZV9udW1iZXIsIGUtPm9mZnNldF9pbl9wYWdlLA0KIAkJCWUtPmdyYWluLCBl
LT5zeW5kcm9tZSk7DQotCQllZGFjX2NlX2Vycm9yKG1jaSwgZS0+ZXJyb3JfY291bnQsIHBvcywg
ZS0+bXNnLCBlLT5sb2NhdGlvbiwgZS0+bGFiZWwsDQotCQkJICAgICAgZGV0YWlsLCBlLT5vdGhl
cl9kZXRhaWwsIGUtPmVuYWJsZV9wZXJfbGF5ZXJfcmVwb3J0LA0KKwkJZWRhY19jZV9lcnJvciht
Y2ksIGUtPmVycm9yX2NvdW50LCBwb3MsIGUtPm1zZywgZS0+bG9jYXRpb24sDQorCQkJICAgICAg
ZS0+bGFiZWwsIGRldGFpbCwgZS0+b3RoZXJfZGV0YWlsLA0KIAkJCSAgICAgIGUtPnBhZ2VfZnJh
bWVfbnVtYmVyLCBlLT5vZmZzZXRfaW5fcGFnZSwgZS0+Z3JhaW4pOw0KIAl9IGVsc2Ugew0KIAkJ
c25wcmludGYoZGV0YWlsLCBzaXplb2YoZGV0YWlsKSwNCiAJCQkicGFnZToweCVseCBvZmZzZXQ6
MHglbHggZ3JhaW46JWxkIiwNCiAJCQllLT5wYWdlX2ZyYW1lX251bWJlciwgZS0+b2Zmc2V0X2lu
X3BhZ2UsIGUtPmdyYWluKTsNCiANCi0JCWVkYWNfdWVfZXJyb3IobWNpLCBlLT5lcnJvcl9jb3Vu
dCwgcG9zLCBlLT5tc2csIGUtPmxvY2F0aW9uLCBlLT5sYWJlbCwNCi0JCQkgICAgICBkZXRhaWws
IGUtPm90aGVyX2RldGFpbCwgZS0+ZW5hYmxlX3Blcl9sYXllcl9yZXBvcnQpOw0KKwkJZWRhY191
ZV9lcnJvcihtY2ksIGUtPmVycm9yX2NvdW50LCBwb3MsIGUtPm1zZywgZS0+bG9jYXRpb24sDQor
CQkJICAgICAgZS0+bGFiZWwsIGRldGFpbCwgZS0+b3RoZXJfZGV0YWlsKTsNCiAJfQ0KIA0KIA0K
QEAgLTEwOTQsNiArMTA1Niw3IEBAIHZvaWQgZWRhY19tY19oYW5kbGVfZXJyb3IoY29uc3QgZW51
bSBod19ldmVudF9tY19lcnJfdHlwZSB0eXBlLA0KIAlpbnQgaSwgbl9sYWJlbHMgPSAwOw0KIAl1
OCBncmFpbl9iaXRzOw0KIAlzdHJ1Y3QgZWRhY19yYXdfZXJyb3JfZGVzYyAqZSA9ICZtY2ktPmVy
cm9yX2Rlc2M7DQorCWJvb2wgcGVyX2xheWVyX3JlcG9ydCA9IGZhbHNlOw0KIA0KIAllZGFjX2Ri
ZygzLCAiTUMlZFxuIiwgbWNpLT5tY19pZHgpOw0KIA0KQEAgLTExMTEsOSArMTA3NCw5IEBAIHZv
aWQgZWRhY19tY19oYW5kbGVfZXJyb3IoY29uc3QgZW51bSBod19ldmVudF9tY19lcnJfdHlwZSB0
eXBlLA0KIA0KIAkvKg0KIAkgKiBDaGVjayBpZiB0aGUgZXZlbnQgcmVwb3J0IGlzIGNvbnNpc3Rl
bnQgYW5kIGlmIHRoZSBtZW1vcnkNCi0JICogbG9jYXRpb24gaXMga25vd24uIElmIGl0IGlzIGtu
b3duLCBlbmFibGVfcGVyX2xheWVyX3JlcG9ydCB3aWxsIGJlDQotCSAqIHRydWUsIHRoZSBESU1N
KHMpIGxhYmVsIGluZm8gd2lsbCBiZSBmaWxsZWQgYW5kIHRoZSBwZXItbGF5ZXINCi0JICogZXJy
b3IgY291bnRlcnMgd2lsbCBiZSBpbmNyZW1lbnRlZC4NCisJICogbG9jYXRpb24gaXMga25vd24u
IElmIGl0IGlzIGtub3duLCB0aGUgRElNTShzKSBsYWJlbCBpbmZvDQorCSAqIHdpbGwgYmUgZmls
bGVkIGFuZCB0aGUgcGVyLWxheWVyIGVycm9yIGNvdW50ZXJzIHdpbGwgYmUNCisJICogaW5jcmVt
ZW50ZWQuDQogCSAqLw0KIAlmb3IgKGkgPSAwOyBpIDwgbWNpLT5uX2xheWVyczsgaSsrKSB7DQog
CQlpZiAocG9zW2ldID49IChpbnQpbWNpLT5sYXllcnNbaV0uc2l6ZSkgew0KQEAgLTExMzEsNyAr
MTA5NCw3IEBAIHZvaWQgZWRhY19tY19oYW5kbGVfZXJyb3IoY29uc3QgZW51bSBod19ldmVudF9t
Y19lcnJfdHlwZSB0eXBlLA0KIAkJCXBvc1tpXSA9IC0xOw0KIAkJfQ0KIAkJaWYgKHBvc1tpXSA+
PSAwKQ0KLQkJCWUtPmVuYWJsZV9wZXJfbGF5ZXJfcmVwb3J0ID0gdHJ1ZTsNCisJCQlwZXJfbGF5
ZXJfcmVwb3J0ID0gdHJ1ZTsNCiAJfQ0KIA0KIAkvKg0KQEAgLTExNjAsMTUgKzExMjMsMTggQEAg
dm9pZCBlZGFjX21jX2hhbmRsZV9lcnJvcihjb25zdCBlbnVtIGh3X2V2ZW50X21jX2Vycl90eXBl
IHR5cGUsDQogCQlpZiAoZGltbS0+Z3JhaW4gPiBlLT5ncmFpbikNCiAJCQllLT5ncmFpbiA9IGRp
bW0tPmdyYWluOw0KIA0KKwkJaWYgKCFwZXJfbGF5ZXJfcmVwb3J0KQ0KKwkJCWNvbnRpbnVlOw0K
Kw0KIAkJLyoNCiAJCSAqIElmIHRoZSBlcnJvciBpcyBtZW1vcnktY29udHJvbGxlciB3aWRlLCB0
aGVyZSdzIG5vIG5lZWQgdG8NCiAJCSAqIHNlZWsgZm9yIHRoZSBhZmZlY3RlZCBESU1NcyBiZWNh
dXNlIHRoZSB3aG9sZQ0KIAkJICogY2hhbm5lbC9tZW1vcnkgY29udHJvbGxlci8uLi4gIG1heSBi
ZSBhZmZlY3RlZC4NCiAJCSAqIEFsc28sIGRvbid0IHNob3cgZXJyb3JzIGZvciBlbXB0eSBESU1N
IHNsb3RzLg0KIAkJICovDQotCQlpZiAoZS0+ZW5hYmxlX3Blcl9sYXllcl9yZXBvcnQgJiYgZGlt
bS0+bnJfcGFnZXMpIHsNCisJCWlmIChkaW1tLT5ucl9wYWdlcykgew0KIAkJCWlmIChuX2xhYmVs
cyA+PSBFREFDX01BWF9MQUJFTFMpIHsNCi0JCQkJZS0+ZW5hYmxlX3Blcl9sYXllcl9yZXBvcnQg
PSBmYWxzZTsNCisJCQkJcGVyX2xheWVyX3JlcG9ydCA9IGZhbHNlOw0KIAkJCQlicmVhazsNCiAJ
CQl9DQogCQkJbl9sYWJlbHMrKzsNCkBAIC0xMTk5LDcgKzExNjUsNyBAQCB2b2lkIGVkYWNfbWNf
aGFuZGxlX2Vycm9yKGNvbnN0IGVudW0gaHdfZXZlbnRfbWNfZXJyX3R5cGUgdHlwZSwNCiAJCX0N
CiAJfQ0KIA0KLQlpZiAoIWUtPmVuYWJsZV9wZXJfbGF5ZXJfcmVwb3J0KSB7DQorCWlmICghcGVy
X2xheWVyX3JlcG9ydCkgew0KIAkJc3RyY3B5KGUtPmxhYmVsLCAiYW55IG1lbW9yeSIpOw0KIAl9
IGVsc2Ugew0KIAkJZWRhY19kYmcoNCwgImNzcm93L2NoYW5uZWwgdG8gaW5jcmVtZW50OiAoJWQs
JWQpXG4iLCByb3csIGNoYW4pOw0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZWRhYy9lZGFjX21jX3N5
c2ZzLmMgYi9kcml2ZXJzL2VkYWMvZWRhY19tY19zeXNmcy5jDQppbmRleCA3NWNiYTA4MTJhMTYu
LjU1MzU3ZDI0M2ZjYSAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZWRhYy9lZGFjX21jX3N5c2ZzLmMN
CisrKyBiL2RyaXZlcnMvZWRhYy9lZGFjX21jX3N5c2ZzLmMNCkBAIC01NTcsMTAgKzU1Nyw4IEBA
IHN0YXRpYyBzc2l6ZV90IGRpbW1kZXZfY2VfY291bnRfc2hvdyhzdHJ1Y3QgZGV2aWNlICpkZXYs
DQogCQkJCSAgICAgIGNoYXIgKmRhdGEpDQogew0KIAlzdHJ1Y3QgZGltbV9pbmZvICpkaW1tID0g
dG9fZGltbShkZXYpOw0KLQl1MzIgY291bnQ7DQogDQotCWNvdW50ID0gZGltbS0+bWNpLT5jZV9w
ZXJfbGF5ZXJbZGltbS0+bWNpLT5uX2xheWVycy0xXVtkaW1tLT5pZHhdOw0KLQlyZXR1cm4gc3By
aW50ZihkYXRhLCAiJXVcbiIsIGNvdW50KTsNCisJcmV0dXJuIHNwcmludGYoZGF0YSwgIiV1XG4i
LCBkaW1tLT5jZV9jb3VudCk7DQogfQ0KIA0KIHN0YXRpYyBzc2l6ZV90IGRpbW1kZXZfdWVfY291
bnRfc2hvdyhzdHJ1Y3QgZGV2aWNlICpkZXYsDQpAQCAtNTY4LDEwICs1NjYsOCBAQCBzdGF0aWMg
c3NpemVfdCBkaW1tZGV2X3VlX2NvdW50X3Nob3coc3RydWN0IGRldmljZSAqZGV2LA0KIAkJCQkg
ICAgICBjaGFyICpkYXRhKQ0KIHsNCiAJc3RydWN0IGRpbW1faW5mbyAqZGltbSA9IHRvX2RpbW0o
ZGV2KTsNCi0JdTMyIGNvdW50Ow0KIA0KLQljb3VudCA9IGRpbW0tPm1jaS0+dWVfcGVyX2xheWVy
W2RpbW0tPm1jaS0+bl9sYXllcnMtMV1bZGltbS0+aWR4XTsNCi0JcmV0dXJuIHNwcmludGYoZGF0
YSwgIiV1XG4iLCBjb3VudCk7DQorCXJldHVybiBzcHJpbnRmKGRhdGEsICIldVxuIiwgZGltbS0+
dWVfY291bnQpOw0KIH0NCiANCiAvKiBkaW1tL3JhbmsgYXR0cmlidXRlIGZpbGVzICovDQpAQCAt
NjU5LDcgKzY1NSw3IEBAIHN0YXRpYyBzc2l6ZV90IG1jaV9yZXNldF9jb3VudGVyc19zdG9yZShz
dHJ1Y3QgZGV2aWNlICpkZXYsDQogCQkJCQljb25zdCBjaGFyICpkYXRhLCBzaXplX3QgY291bnQp
DQogew0KIAlzdHJ1Y3QgbWVtX2N0bF9pbmZvICptY2kgPSB0b19tY2koZGV2KTsNCi0JaW50IGNu
dCwgcm93LCBjaGFuLCBpOw0KKwlpbnQgcm93LCBjaGFuOw0KIAltY2ktPnVlX21jID0gMDsNCiAJ
bWNpLT5jZV9tYyA9IDA7DQogCW1jaS0+dWVfbm9pbmZvX2NvdW50ID0gMDsNCkBAIC02NzUsMTMg
KzY3MSw2IEBAIHN0YXRpYyBzc2l6ZV90IG1jaV9yZXNldF9jb3VudGVyc19zdG9yZShzdHJ1Y3Qg
ZGV2aWNlICpkZXYsDQogCQkJcmktPmNoYW5uZWxzW2NoYW5dLT5jZV9jb3VudCA9IDA7DQogCX0N
CiANCi0JY250ID0gMTsNCi0JZm9yIChpID0gMDsgaSA8IG1jaS0+bl9sYXllcnM7IGkrKykgew0K
LQkJY250ICo9IG1jaS0+bGF5ZXJzW2ldLnNpemU7DQotCQltZW1zZXQobWNpLT5jZV9wZXJfbGF5
ZXJbaV0sIDAsIGNudCAqIHNpemVvZih1MzIpKTsNCi0JCW1lbXNldChtY2ktPnVlX3Blcl9sYXll
cltpXSwgMCwgY250ICogc2l6ZW9mKHUzMikpOw0KLQl9DQotDQogCW1jaS0+c3RhcnRfdGltZSA9
IGppZmZpZXM7DQogCXJldHVybiBjb3VudDsNCiB9DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9lZGFj
L2doZXNfZWRhYy5jIGIvZHJpdmVycy9lZGFjL2doZXNfZWRhYy5jDQppbmRleCBmZTQ1MzkyZjBj
M2UuLjJjOGY4MTZjMmNjNyAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZWRhYy9naGVzX2VkYWMuYw0K
KysrIGIvZHJpdmVycy9lZGFjL2doZXNfZWRhYy5jDQpAQCAtMzUwLDExICszNTAsOCBAQCB2b2lk
IGdoZXNfZWRhY19yZXBvcnRfbWVtX2Vycm9yKGludCBzZXYsIHN0cnVjdCBjcGVyX3NlY19tZW1f
ZXJyICptZW1fZXJyKQ0KIAkJCQkgICAgIG1lbV9lcnItPm1lbV9kZXZfaGFuZGxlKTsNCiANCiAJ
CWluZGV4ID0gZ2V0X2RpbW1fc21iaW9zX2luZGV4KG1lbV9lcnItPm1lbV9kZXZfaGFuZGxlKTsN
Ci0JCWlmIChpbmRleCA+PSAwKSB7DQorCQlpZiAoaW5kZXggPj0gMCkNCiAJCQllLT50b3BfbGF5
ZXIgPSBpbmRleDsNCi0JCQllLT5lbmFibGVfcGVyX2xheWVyX3JlcG9ydCA9IHRydWU7DQotCQl9
DQotDQogCX0NCiAJaWYgKHAgPiBlLT5sb2NhdGlvbikNCiAJCSoocCAtIDEpID0gJ1wwJzsNCmRp
ZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L2VkYWMuaCBiL2luY2x1ZGUvbGludXgvZWRhYy5oDQpp
bmRleCAyMGEwNGY0ODYxNmMuLjRkY2YwNzVlOWRmZiAxMDA2NDQNCi0tLSBhL2luY2x1ZGUvbGlu
dXgvZWRhYy5oDQorKysgYi9pbmNsdWRlL2xpbnV4L2VkYWMuaA0KQEAgLTM4Myw2ICszODMsOSBA
QCBzdHJ1Y3QgZGltbV9pbmZvIHsNCiAJdW5zaWduZWQgY3Nyb3csIGNzY2hhbm5lbDsJLyogUG9p
bnRzIHRvIHRoZSBvbGQgQVBJIGRhdGEgKi8NCiANCiAJdTE2IHNtYmlvc19oYW5kbGU7ICAgICAg
ICAgICAgICAvKiBIYW5kbGUgZm9yIFNNQklPUyB0eXBlIDE3ICovDQorDQorCXUzMiBjZV9jb3Vu
dDsNCisJdTMyIHVlX2NvdW50Ow0KIH07DQogDQogLyoqDQpAQCAtNDUzLDggKzQ1Niw2IEBAIHN0
cnVjdCBlcnJjb3VudF9hdHRyaWJ1dGVfZGF0YSB7DQogICogQGxvY2F0aW9uOgkJCWxvY2F0aW9u
IG9mIHRoZSBlcnJvcg0KICAqIEBsYWJlbDoJCQlsYWJlbCBvZiB0aGUgYWZmZWN0ZWQgRElNTShz
KQ0KICAqIEBvdGhlcl9kZXRhaWw6CQlvdGhlciBkcml2ZXItc3BlY2lmaWMgZGV0YWlsIGFib3V0
IHRoZSBlcnJvcg0KLSAqIEBlbmFibGVfcGVyX2xheWVyX3JlcG9ydDoJaWYgZmFsc2UsIHRoZSBl
cnJvciBhZmZlY3RzIGFsbCBsYXllcnMNCi0gKgkJCQkodHlwaWNhbGx5LCBhIG1lbW9yeSBjb250
cm9sbGVyIGVycm9yKQ0KICAqLw0KIHN0cnVjdCBlZGFjX3Jhd19lcnJvcl9kZXNjIHsNCiAJLyoN
CkBAIC00NzUsNyArNDc2LDYgQEAgc3RydWN0IGVkYWNfcmF3X2Vycm9yX2Rlc2Mgew0KIAl1bnNp
Z25lZCBsb25nIHN5bmRyb21lOw0KIAljb25zdCBjaGFyICptc2c7DQogCWNvbnN0IGNoYXIgKm90
aGVyX2RldGFpbDsNCi0JYm9vbCBlbmFibGVfcGVyX2xheWVyX3JlcG9ydDsNCiB9Ow0KIA0KIC8q
IE1FTU9SWSBjb250cm9sbGVyIGluZm9ybWF0aW9uIHN0cnVjdHVyZQ0KQEAgLTU2NSw3ICs1NjUs
NiBAQCBzdHJ1Y3QgbWVtX2N0bF9pbmZvIHsNCiAJICovDQogCXUzMiBjZV9ub2luZm9fY291bnQs
IHVlX25vaW5mb19jb3VudDsNCiAJdTMyIHVlX21jLCBjZV9tYzsNCi0JdTMyICpjZV9wZXJfbGF5
ZXJbRURBQ19NQVhfTEFZRVJTXSwgKnVlX3Blcl9sYXllcltFREFDX01BWF9MQVlFUlNdOw0KIA0K
IAlzdHJ1Y3QgY29tcGxldGlvbiBjb21wbGV0ZTsNCiANCi0tIA0KMi4yMC4xDQoNCg==
