Return-Path: <linux-edac-owner@vger.kernel.org>
X-Original-To: lists+linux-edac@lfdr.de
Delivered-To: lists+linux-edac@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id 0514450FCF
	for <lists+linux-edac@lfdr.de>; Mon, 24 Jun 2019 17:10:02 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1730808AbfFXPJs (ORCPT <rfc822;lists+linux-edac@lfdr.de>);
        Mon, 24 Jun 2019 11:09:48 -0400
Received: from mx0a-0016f401.pphosted.com ([67.231.148.174]:60586 "EHLO
        mx0b-0016f401.pphosted.com" rhost-flags-OK-OK-OK-FAIL)
        by vger.kernel.org with ESMTP id S1730834AbfFXPJr (ORCPT
        <rfc822;linux-edac@vger.kernel.org>);
        Mon, 24 Jun 2019 11:09:47 -0400
Received: from pps.filterd (m0045849.ppops.net [127.0.0.1])
        by mx0a-0016f401.pphosted.com (8.16.0.27/8.16.0.27) with SMTP id x5OF0N6n018740;
        Mon, 24 Jun 2019 08:09:40 -0700
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=marvell.com; h=from : to : cc :
 subject : date : message-id : references : in-reply-to : content-type :
 content-transfer-encoding : mime-version; s=pfpt0818;
 bh=7Z0UKMqfS8QvL2mnWEE469Otwk5nyt+5zDx8HNspP20=;
 b=crUbmuvbbvT3MzYaKe+2Qk1jDGdghm4FPQZYv2dhG7BKbH6Am0AyGxgz99x6DXEAif3H
 gCXy9Pc4kSq3wqHRFcsSuKTZjjOSL/1ya9aIWBd/N3zb6SlpjWj+83WuQqfX4ZpZ/zjo
 jAZDe1Tey1pIrA5ytoWbshwkjYysPHkJ89Cq8IczKKhzwavhczdun3PW3HIi211kKWE0
 oTlEpGX1epDVbCB8sbmX/icUWzYL03gygYcuT7BL5dG0jtRPyDIn3I6Cy1uFxhHOa9uf
 S70MSZULpL1EaPbilUMkdbjEUbi5ZYTvEJVurB6q+rrpqRzIDGFREZfywwkbUHqkZt4N wA== 
Received: from sc-exch02.marvell.com ([199.233.58.182])
        by mx0a-0016f401.pphosted.com with ESMTP id 2tarxr9tc7-1
        (version=TLSv1.2 cipher=ECDHE-RSA-AES256-SHA384 bits=256 verify=NOT);
        Mon, 24 Jun 2019 08:09:40 -0700
Received: from SC-EXCH02.marvell.com (10.93.176.82) by SC-EXCH02.marvell.com
 (10.93.176.82) with Microsoft SMTP Server (TLS) id 15.0.1367.3; Mon, 24 Jun
 2019 08:09:39 -0700
Received: from NAM03-BY2-obe.outbound.protection.outlook.com (104.47.42.52) by
 SC-EXCH02.marvell.com (10.93.176.82) with Microsoft SMTP Server (TLS) id
 15.0.1367.3 via Frontend Transport; Mon, 24 Jun 2019 08:09:39 -0700
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=marvell.onmicrosoft.com; s=selector2-marvell-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=7Z0UKMqfS8QvL2mnWEE469Otwk5nyt+5zDx8HNspP20=;
 b=o1VLQdEEo2+LH+4ozj9HGk44HSjbAI/zBZoJJHkBAWMVsfRf4HKwCcz8BvnArn2Llro2zpiDALY7tqichzqsEFD/MxznZHSzi5xNikm8EShrUr2BxJMd1pGV7wpJNyvxn/Ad7XtZ3ZvS/ZlnSo6pmt7BWoSeZRvPSicTNdqsldo=
Received: from MN2PR18MB3408.namprd18.prod.outlook.com (10.255.238.217) by
 MN2PR18MB2589.namprd18.prod.outlook.com (20.179.82.96) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2008.16; Mon, 24 Jun 2019 15:09:38 +0000
Received: from MN2PR18MB3408.namprd18.prod.outlook.com
 ([fe80::d3:794c:1b94:cf3]) by MN2PR18MB3408.namprd18.prod.outlook.com
 ([fe80::d3:794c:1b94:cf3%4]) with mapi id 15.20.2008.014; Mon, 24 Jun 2019
 15:09:38 +0000
From:   Robert Richter <rrichter@marvell.com>
To:     Borislav Petkov <bp@alien8.de>, James Morse <james.morse@arm.com>,
        "Mauro Carvalho Chehab" <mchehab@kernel.org>
CC:     "linux-edac@vger.kernel.org" <linux-edac@vger.kernel.org>,
        "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>,
        Robert Richter <rrichter@marvell.com>
Subject: [PATCH v2 21/24] EDAC, ghes: Enable per-layer reporting based on
 card/module
Thread-Topic: [PATCH v2 21/24] EDAC, ghes: Enable per-layer reporting based on
 card/module
Thread-Index: AQHVKp7X2ENQDwTZIEmHMk4xQwA/XQ==
Date:   Mon, 24 Jun 2019 15:09:37 +0000
Message-ID: <20190624150758.6695-22-rrichter@marvell.com>
References: <20190624150758.6695-1-rrichter@marvell.com>
In-Reply-To: <20190624150758.6695-1-rrichter@marvell.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: HE1P190CA0035.EURP190.PROD.OUTLOOK.COM (2603:10a6:7:52::24)
 To MN2PR18MB3408.namprd18.prod.outlook.com (2603:10b6:208:16c::25)
x-ms-exchange-messagesentrepresentingtype: 1
x-mailer: git-send-email 2.20.1
x-originating-ip: [92.254.182.202]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 0d14670b-2279-466b-acb7-08d6f8b5f96e
x-microsoft-antispam: BCL:0;PCL:0;RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(2017052603328)(7193020);SRVR:MN2PR18MB2589;
x-ms-traffictypediagnostic: MN2PR18MB2589:
x-microsoft-antispam-prvs: <MN2PR18MB258906DE07A0A81E9F4935C7D9E00@MN2PR18MB2589.namprd18.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:4125;
x-forefront-prvs: 007814487B
x-forefront-antispam-report: SFV:NSPM;SFS:(10009020)(396003)(39860400002)(346002)(376002)(366004)(136003)(189003)(199004)(2906002)(2616005)(486006)(476003)(52116002)(14444005)(256004)(5660300002)(66446008)(73956011)(66946007)(1076003)(14454004)(6116002)(86362001)(3846002)(99286004)(6486002)(68736007)(81166006)(81156014)(6436002)(4326008)(305945005)(50226002)(53936002)(7736002)(8676002)(8936002)(478600001)(64756008)(66556008)(66476007)(6512007)(107886003)(71190400001)(71200400001)(36756003)(26005)(102836004)(386003)(186003)(11346002)(76176011)(6506007)(110136005)(316002)(54906003)(446003)(25786009)(66066001);DIR:OUT;SFP:1101;SCL:1;SRVR:MN2PR18MB2589;H:MN2PR18MB3408.namprd18.prod.outlook.com;FPR:;SPF:None;LANG:en;PTR:InfoNoRecords;MX:1;A:1;
received-spf: None (protection.outlook.com: marvell.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: iBkW0geixbLc5vk3LMdcJ5KSX9jYzKCM5k+j4mCqOuzIXsFuWlH3LeMKmHbQDTmiA3Fh2q5f/X/C8pWS8WPcvnHXuJrhqxY5hXhPkAP6tbA1zfPYiUldhxlNKeR6MK3YqVwWgnIvBNdpyls7xUttr9XKFZuvE6JHnATIgZ2pqPhMIHvgzAH/8qX9kWSjUjrGEfMBSFT9zzX5LPVKF+9tiLo1rhekAcQsMoc14BM7o8gYr+RhzliJ/1iEgyFLASRxVORPTmv08eoN8iZgV8SAflquIJPIwuNRkIGeMe1xSObUTCrjdIQzHVOBitIvrr10egZmks6PGL3kJUy5YcIFxia333xnjaJeJP2V9TCeNqmO2G0b5I3G+H9fVjrhshAjxWfcgpE8HCj3A2MrhV2t+X7omMBniaB8jWTuSTmrBAs=
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-MS-Exchange-CrossTenant-Network-Message-Id: 0d14670b-2279-466b-acb7-08d6f8b5f96e
X-MS-Exchange-CrossTenant-originalarrivaltime: 24 Jun 2019 15:09:37.9381
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 70e1fb47-1155-421d-87fc-2e58f638b6e0
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: rrichter@marvell.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR18MB2589
X-OriginatorOrg: marvell.com
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10434:,, definitions=2019-06-24_10:,,
 signatures=0
Sender: linux-edac-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-edac.vger.kernel.org>
X-Mailing-List: linux-edac@vger.kernel.org

VGhpcyBwYXRjaCBlbmFibGVzIHBlci1sYXllciByZXBvcnRpbmcgb2YgdGhlIEdIRVMgZHJpdmVy
IGJhc2VkIG9uDQpub2RlLCBjYXJkIGFuZCBtb2R1bGUuIEEgZGltbSBjYW4gYmUgdW5pcXVlbHkg
aWRlbnRpZmllZCBieSB0aG9zZSAzDQppZGVudGlmaWVycy4gVGhlIG1jIGRldmljZSBpcyBzZWxl
Y3RlZCBieSB0aGUgbm9kZSBpZC4gVGh1cywgZWFjaCBnaGVzDQplZGFjIG1lbW9yeSBjb250cm9s
bGVyIGRldmljZSBoYXMgYSAyLWRpbWVuc2lvbmFsIGxheWVyIGhpZXJhcmNoeQ0KYmFzZWQgb24g
Y2FyZCBhbmQgbW9kdWxlIGluIHRoZSBzYW1lIHdheSBhcyBtb3N0IG90aGVyIGRyaXZlciBoYXZl
LiBBbg0KZXJyb3IgbG9nIGxvb2tzIGFzIGZvbGxvd3Mgbm93Og0KDQpbIDg5MDIuNTkyMDYwXSB7
NH1bSGFyZHdhcmUgRXJyb3JdOiAgRXJyb3IgNiwgdHlwZTogY29ycmVjdGVkDQpbIDg5MDIuNTk3
NTM0XSB7NH1bSGFyZHdhcmUgRXJyb3JdOiAgIHNlY3Rpb25fdHlwZTogbWVtb3J5IGVycm9yDQpb
IDg5MDIuNjAzMjY3XSB7NH1bSGFyZHdhcmUgRXJyb3JdOiAgIGVycm9yX3N0YXR1czogMHgwMDAw
MDAwMDAwMDAwNDAwDQpbIDg5MDIuNjA5NTIyXSB7NH1bSGFyZHdhcmUgRXJyb3JdOiAgIHBoeXNp
Y2FsX2FkZHJlc3M6IDB4MDAwMDAwYjNiYjdkMzAwMA0KWyA4OTAyLjYxNjEyNl0gezR9W0hhcmR3
YXJlIEVycm9yXTogICBub2RlOiAxIGNhcmQ6IDMgbW9kdWxlOiAwIHJhbms6IDEgYmFuazogNzcx
IGNvbHVtbjogMTQgYml0X3Bvc2l0aW9uOiAxNg0KWyA4OTAyLjYyNTg1NF0gezR9W0hhcmR3YXJl
IEVycm9yXTogICBESU1NIGxvY2F0aW9uOiBOMSBESU1NX0wwDQpbIDg5MDIuODA3NzgzXSBFREFD
IE1DMTogMSBDRSBnaGVzX21jIG9uIE4xIERJTU1fTDAgKGNhcmQ6MyBtb2R1bGU6MCBwYWdlOjB4
YjNiYjdkMyBvZmZzZXQ6MHgwIGdyYWluOjAgc3luZHJvbWU6MHgwIC0gQVBFSSBsb2NhdGlvbjog
bm9kZToxIGNhcmQ6MyBtb2R1bGU6MCByYW5rOjEgYmFuazo3NzEgY29sOjE0IGJpdF9wb3M6MTYg
aGFuZGxlOjB4MDA1MiBzdGF0dXMoMHgwMDAwMDAwMDAwMDAwNDAwKTogU3RvcmFnZSBlcnJvciBp
biBEUkFNIG1lbW9yeSkNCg0KR0hFUyBlcnJvciByZXBvcnRzIGFyZSBub3cgc2ltaWxhciB0byBl
ZGFjX21jIHJlcG9ydHMuIFRoaXMgcGF0Y2gNCm1vdmVzIGNvbW1vbiBjb2RlIG9mIGdoZXMgYW5k
IGVkYWNfbWMgdG8gZWRhY19yYXdfbWNfaGFuZGxlX2Vycm9yKCkuDQoNClNpZ25lZC1vZmYtYnk6
IFJvYmVydCBSaWNodGVyIDxycmljaHRlckBtYXJ2ZWxsLmNvbT4NCi0tLQ0KIGRyaXZlcnMvZWRh
Yy9lZGFjX21jLmMgICB8IDQ1ICsrKysrKysrKysrKysrLS0tLS0tLS0tLQ0KIGRyaXZlcnMvZWRh
Yy9naGVzX2VkYWMuYyB8IDc2ICsrKysrKysrKysrKysrKysrKy0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0NCiBpbmNsdWRlL2xpbnV4L2VkYWMuaCAgICAgfCAgMiArKw0KIDMgZmlsZXMgY2hhbmdlZCwg
NjMgaW5zZXJ0aW9ucygrKSwgNjAgZGVsZXRpb25zKC0pDQoNCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2VkYWMvZWRhY19tYy5jIGIvZHJpdmVycy9lZGFjL2VkYWNfbWMuYw0KaW5kZXggM2E0MDQ5NmEx
OTczLi45MzgzYTExNzliODMgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2VkYWMvZWRhY19tYy5jDQor
KysgYi9kcml2ZXJzL2VkYWMvZWRhY19tYy5jDQpAQCAtOTE1LDExICs5MTUsMTMgQEAgaW50IGVk
YWNfbWNfZmluZF9jc3Jvd19ieV9wYWdlKHN0cnVjdCBtZW1fY3RsX2luZm8gKm1jaSwgdW5zaWdu
ZWQgbG9uZyBwYWdlKQ0KIEVYUE9SVF9TWU1CT0xfR1BMKGVkYWNfbWNfZmluZF9jc3Jvd19ieV9w
YWdlKTsNCiANCiBjb25zdCBjaGFyICplZGFjX2xheWVyX25hbWVbXSA9IHsNCi0JW0VEQUNfTUNf
TEFZRVJfQlJBTkNIXSA9ICJicmFuY2giLA0KLQlbRURBQ19NQ19MQVlFUl9DSEFOTkVMXSA9ICJj
aGFubmVsIiwNCi0JW0VEQUNfTUNfTEFZRVJfU0xPVF0gPSAic2xvdCIsDQotCVtFREFDX01DX0xB
WUVSX0NISVBfU0VMRUNUXSA9ICJjc3JvdyIsDQotCVtFREFDX01DX0xBWUVSX0FMTF9NRU1dID0g
Im1lbW9yeSIsDQorCVtFREFDX01DX0xBWUVSX0JSQU5DSF0JCT0gImJyYW5jaCIsDQorCVtFREFD
X01DX0xBWUVSX0NIQU5ORUxdCQk9ICJjaGFubmVsIiwNCisJW0VEQUNfTUNfTEFZRVJfU0xPVF0J
CT0gInNsb3QiLA0KKwlbRURBQ19NQ19MQVlFUl9DSElQX1NFTEVDVF0JPSAiY3Nyb3ciLA0KKwlb
RURBQ19NQ19MQVlFUl9BTExfTUVNXQkJPSAibWVtb3J5IiwNCisJW0VEQUNfTUNfTEFZRVJfQ0FS
RF0JCT0gImNhcmQiLA0KKwlbRURBQ19NQ19MQVlFUl9NT0RVTEVdCQk9ICJtb2R1bGUiLA0KIH07
DQogRVhQT1JUX1NZTUJPTF9HUEwoZWRhY19sYXllcl9uYW1lKTsNCiANCkBAIC0xMDQ2LDcgKzEw
NDgsMjYgQEAgdm9pZCBlZGFjX3Jhd19tY19oYW5kbGVfZXJyb3IoY29uc3QgZW51bSBod19ldmVu
dF9tY19lcnJfdHlwZSB0eXBlLA0KIAkJCSAgICAgIGludCByb3csIGludCBjaGFuKQ0KIHsNCiAJ
Y2hhciBkZXRhaWxbODBdOw0KKwlpbnQgaWR4Ow0KKwlpbnQgcG9zW0VEQUNfTUFYX0xBWUVSU10g
PSB7IGUtPnRvcF9sYXllciwgZS0+bWlkX2xheWVyLA0KKwkJCQkgICAgIGUtPmxvd19sYXllciB9
Ow0KIAl1OCBncmFpbl9iaXRzOw0KKwljaGFyICpwOw0KKw0KKwkvKiBGaWxsIHRoZSBSQU0gbG9j
YXRpb24gZGF0YSAqLw0KKwlwID0gZS0+bG9jYXRpb247DQorDQorCWZvciAoaWR4ID0gMDsgaWR4
IDwgbWNpLT5uX2xheWVyczsgaWR4KyspIHsNCisJCWlmIChwb3NbaWR4XSA8IDApDQorCQkJY29u
dGludWU7DQorDQorCQlwICs9IHNwcmludGYocCwgIiVzOiVkICIsDQorCQkJICAgICBlZGFjX2xh
eWVyX25hbWVbbWNpLT5sYXllcnNbaWR4XS50eXBlXSwNCisJCQkgICAgIHBvc1tpZHhdKTsNCisJ
fQ0KKw0KKwlpZiAocCA+IGUtPmxvY2F0aW9uKQ0KKwkJKihwIC0gMSkgPSAnXDAnOw0KIA0KIAkv
Kg0KIAkgKiBXZSBleHBlY3QgdGhlIGh3IHRvIHJlcG9ydCBhIHJlYXNvbmFibGUgZ3JhaW4sIGZh
bGxiYWNrIHRvDQpAQCAtMTIzMywyMCArMTI1NCw2IEBAIHZvaWQgZWRhY19tY19oYW5kbGVfZXJy
b3IoY29uc3QgZW51bSBod19ldmVudF9tY19lcnJfdHlwZSB0eXBlLA0KIAllbHNlIGlmICghKmUt
PmxhYmVsKQ0KIAkJc3RyY3B5KGUtPmxhYmVsLCAidW5rbm93biBtZW1vcnkiKTsNCiANCi0JLyog
RmlsbCB0aGUgUkFNIGxvY2F0aW9uIGRhdGEgKi8NCi0JcCA9IGUtPmxvY2F0aW9uOw0KLQ0KLQlm
b3IgKGkgPSAwOyBpIDwgbWNpLT5uX2xheWVyczsgaSsrKSB7DQotCQlpZiAocG9zW2ldIDwgMCkN
Ci0JCQljb250aW51ZTsNCi0NCi0JCXAgKz0gc3ByaW50ZihwLCAiJXM6JWQgIiwNCi0JCQkgICAg
IGVkYWNfbGF5ZXJfbmFtZVttY2ktPmxheWVyc1tpXS50eXBlXSwNCi0JCQkgICAgIHBvc1tpXSk7
DQotCX0NCi0JaWYgKHAgPiBlLT5sb2NhdGlvbikNCi0JCSoocCAtIDEpID0gJ1wwJzsNCi0NCiAJ
ZGltbSA9IGVkYWNfZ2V0X2RpbW0obWNpLCB0b3BfbGF5ZXIsIG1pZF9sYXllciwgbG93X2xheWVy
KTsNCiANCiAJZWRhY19yYXdfbWNfaGFuZGxlX2Vycm9yKHR5cGUsIG1jaSwgZGltbSwgZSwgcm93
LCBjaGFuKTsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2VkYWMvZ2hlc19lZGFjLmMgYi9kcml2ZXJz
L2VkYWMvZ2hlc19lZGFjLmMNCmluZGV4IDY4OTg0MWM1Yzg0ZC4uZmI1YTU0ZTI3OTE3IDEwMDY0
NA0KLS0tIGEvZHJpdmVycy9lZGFjL2doZXNfZWRhYy5jDQorKysgYi9kcml2ZXJzL2VkYWMvZ2hl
c19lZGFjLmMNCkBAIC0xNzgsMTggKzE3OCw2IEBAIHN0YXRpYyB2b2lkIGdoZXNfZWRhY19zZXRf
bmlkKGNvbnN0IHN0cnVjdCBkbWlfaGVhZGVyICpkaCwgdm9pZCAqYXJnKQ0KIAl9DQogfQ0KIA0K
LXN0YXRpYyBpbnQgZ2V0X2RpbW1fc21iaW9zX2luZGV4KHN0cnVjdCBtZW1fY3RsX2luZm8gKm1j
aSwgdTE2IGhhbmRsZSkNCi17DQotCXN0cnVjdCBkaW1tX2luZm8gKmRpbW07DQotDQotCW1jaV9m
b3JfZWFjaF9kaW1tKG1jaSwgZGltbSkgew0KLQkJaWYgKGRpbW0tPnNtYmlvc19oYW5kbGUgPT0g
aGFuZGxlKQ0KLQkJCXJldHVybiBkaW1tLT5pZHg7DQotCX0NCi0NCi0JcmV0dXJuIC0xOw0KLX0N
Ci0NCiBzdGF0aWMgdm9pZCBnaGVzX2VkYWNfZG1pZGVjb2RlKGNvbnN0IHN0cnVjdCBkbWlfaGVh
ZGVyICpkaCwgdm9pZCAqYXJnKQ0KIHsNCiAJaWYgKGRoLT50eXBlID09IERNSV9FTlRSWV9NRU1f
REVWSUNFKSB7DQpAQCAtNTAwLDExICs0ODgsMTMgQEAgdm9pZCBnaGVzX2VkYWNfcmVwb3J0X21l
bV9lcnJvcihpbnQgc2V2LCBzdHJ1Y3QgY3Blcl9zZWNfbWVtX2VyciAqbWVtX2VycikNCiAJcHZ0
ID0gbWNpLT5wdnRfaW5mbzsNCiAJZSA9ICZtY2ktPmVycm9yX2Rlc2M7DQogDQorCWVkYWNfZGJn
KDMsICJNQyVkXG4iLCBtY2ktPm1jX2lkeCk7DQorDQogCS8qIENsZWFucyB0aGUgZXJyb3IgcmVw
b3J0IGJ1ZmZlciAqLw0KIAltZW1zZXQoZSwgMCwgc2l6ZW9mICgqZSkpOw0KKw0KIAllLT5lcnJv
cl9jb3VudCA9IDE7DQogCWUtPmdyYWluID0gMTsNCi0Jc3RyY3B5KGUtPmxhYmVsLCAidW5rbm93
biBsYWJlbCIpOw0KIAllLT50b3BfbGF5ZXIgPSAtMTsNCiAJZS0+bWlkX2xheWVyID0gLTE7DQog
CWUtPmxvd19sYXllciA9IC0xOw0KQEAgLTUxNCw2ICs1MDQsMjUgQEAgdm9pZCBnaGVzX2VkYWNf
cmVwb3J0X21lbV9lcnJvcihpbnQgc2V2LCBzdHJ1Y3QgY3Blcl9zZWNfbWVtX2VyciAqbWVtX2Vy
cikNCiAJKnB2dC0+bXNnID0gJ1wwJzsNCiAJKnB2dC0+b3RoZXJfZGV0YWlsID0gJ1wwJzsNCiAN
CisJaWYgKGRpbW0pIHsNCisJCS8qIFRoZSBESU1NIGNvdWxkIGJlIGlkZW50aWZpZWQuICovDQor
CQllLT50b3BfbGF5ZXIgPSBkaW1tLT5jYXJkOw0KKwkJZS0+bWlkX2xheWVyID0gZGltbS0+bW9k
dWxlOw0KKwkJc3RyY3B5KGUtPmxhYmVsLCBkaW1tLT5kaW1tLT5sYWJlbCk7DQorCX0gZWxzZSBp
ZiAobmlkID49IDAgfHwgY2FyZCA+PSAwIHx8IG1vZHVsZSA+PSAwIHx8IGhhbmRsZSA+PSAwKSB7
DQorCQkvKg0KKwkJICogV2UgaGF2ZSBhdCBsZWFzdCBzb21lIGluZm9ybWF0aW9uIGFuZCBjYW4g
ZG8gYQ0KKwkJICogcGVyLWxheWVyIHJlcG9ydGluZywgYnV0IHRoZSBleGFjdCBsb2NhdGlvbiBp
cw0KKwkJICogdW5rbm93bi4NCisJCSAqLw0KKwkJZS0+dG9wX2xheWVyID0gY2FyZDsNCisJCWUt
Pm1pZF9sYXllciA9IG1vZHVsZTsNCisJCXN0cmNweShlLT5sYWJlbCwgInVua25vd24gbWVtb3J5
Iik7DQorCX0gZWxzZSB7DQorCQkvKiBObyBlcnJvciBsb2NhdGlvbiBhdCBhbGwuICovDQorCQlz
dHJjcHkoZS0+bGFiZWwsICJhbnkgbWVtb3J5Iik7DQorCX0NCisNCiAJc3dpdGNoIChzZXYpIHsN
CiAJY2FzZSBHSEVTX1NFVl9DT1JSRUNURUQ6DQogCQl0eXBlID0gSFdfRVZFTlRfRVJSX0NPUlJF
Q1RFRDsNCkBAIC01MzMsOCArNTQyLDEwIEBAIHZvaWQgZ2hlc19lZGFjX3JlcG9ydF9tZW1fZXJy
b3IoaW50IHNldiwgc3RydWN0IGNwZXJfc2VjX21lbV9lcnIgKm1lbV9lcnIpDQogCQkgKGxvbmcg
bG9uZyltZW1fZXJyLT52YWxpZGF0aW9uX2JpdHMpOw0KIA0KIAkvKiBFcnJvciB0eXBlLCBtYXBw
ZWQgb24gZS0+bXNnICovDQorCXAgPSBwdnQtPm1zZzsNCisJcCArPSBzcHJpbnRmKHAsICIlcyIs
IG1jaS0+Y3RsX25hbWUpOw0KIAlpZiAobWVtX2Vyci0+dmFsaWRhdGlvbl9iaXRzICYgQ1BFUl9N
RU1fVkFMSURfRVJST1JfVFlQRSkgew0KLQkJcCA9IHB2dC0+bXNnOw0KKwkJcCArPSBzcHJpbnRm
KHAsICI6ICIpOw0KIAkJc3dpdGNoIChtZW1fZXJyLT5lcnJvcl90eXBlKSB7DQogCQljYXNlIDA6
DQogCQkJcCArPSBzcHJpbnRmKHAsICJVbmtub3duIik7DQpAQCAtNTg4LDggKzU5OSw2IEBAIHZv
aWQgZ2hlc19lZGFjX3JlcG9ydF9tZW1fZXJyb3IoaW50IHNldiwgc3RydWN0IGNwZXJfc2VjX21l
bV9lcnIgKm1lbV9lcnIpDQogCQkJcCArPSBzcHJpbnRmKHAsICJyZXNlcnZlZCBlcnJvciAoJWQp
IiwNCiAJCQkJICAgICBtZW1fZXJyLT5lcnJvcl90eXBlKTsNCiAJCX0NCi0JfSBlbHNlIHsNCi0J
CXN0cmNweShwdnQtPm1zZywgInVua25vd24gZXJyb3IiKTsNCiAJfQ0KIA0KIAkvKiBFcnJvciBh
ZGRyZXNzICovDQpAQCAtNjAyLDggKzYxMSw5IEBAIHZvaWQgZ2hlc19lZGFjX3JlcG9ydF9tZW1f
ZXJyb3IoaW50IHNldiwgc3RydWN0IGNwZXJfc2VjX21lbV9lcnIgKm1lbV9lcnIpDQogCWlmICht
ZW1fZXJyLT52YWxpZGF0aW9uX2JpdHMgJiBDUEVSX01FTV9WQUxJRF9QQV9NQVNLKQ0KIAkJZS0+
Z3JhaW4gPSB+bWVtX2Vyci0+cGh5c2ljYWxfYWRkcl9tYXNrICsgMTsNCiANCi0JLyogTWVtb3J5
IGVycm9yIGxvY2F0aW9uLCBtYXBwZWQgb24gZS0+bG9jYXRpb24gKi8NCi0JcCA9IGUtPmxvY2F0
aW9uOw0KKwkvKiBNZW1vcnkgZXJyb3IgbG9jYXRpb24sIG1hcHBlZCBvbiBlLT5vdGhlcl9kZXRh
aWwgKi8NCisJcCA9IHB2dC0+b3RoZXJfZGV0YWlsOw0KKwlwICs9IHNucHJpbnRmKHAsIHNpemVv
ZihwdnQtPm90aGVyX2RldGFpbCksICJBUEVJIGxvY2F0aW9uOiAiKTsNCiAJaWYgKG1lbV9lcnIt
PnZhbGlkYXRpb25fYml0cyAmIENQRVJfTUVNX1ZBTElEX05PREUpDQogCQlwICs9IHNwcmludGYo
cCwgIm5vZGU6JWQgIiwgbWVtX2Vyci0+bm9kZSk7DQogCWlmIChtZW1fZXJyLT52YWxpZGF0aW9u
X2JpdHMgJiBDUEVSX01FTV9WQUxJRF9DQVJEKQ0KQEAgLTYyMSwyNyArNjMxLDggQEAgdm9pZCBn
aGVzX2VkYWNfcmVwb3J0X21lbV9lcnJvcihpbnQgc2V2LCBzdHJ1Y3QgY3Blcl9zZWNfbWVtX2Vy
ciAqbWVtX2VycikNCiAJaWYgKG1lbV9lcnItPnZhbGlkYXRpb25fYml0cyAmIENQRVJfTUVNX1ZB
TElEX0JJVF9QT1NJVElPTikNCiAJCXAgKz0gc3ByaW50ZihwLCAiYml0X3BvczolZCAiLCBtZW1f
ZXJyLT5iaXRfcG9zKTsNCiAJaWYgKG1lbV9lcnItPnZhbGlkYXRpb25fYml0cyAmIENQRVJfTUVN
X1ZBTElEX01PRFVMRV9IQU5ETEUpIHsNCi0JCWNvbnN0IGNoYXIgKmJhbmsgPSBOVUxMLCAqZGV2
aWNlID0gTlVMTDsNCi0JCWludCBpbmRleCA9IC0xOw0KLQ0KLQkJZG1pX21lbWRldl9uYW1lKG1l
bV9lcnItPm1lbV9kZXZfaGFuZGxlLCAmYmFuaywgJmRldmljZSk7DQotCQlpZiAoYmFuayAhPSBO
VUxMICYmIGRldmljZSAhPSBOVUxMKQ0KLQkJCXAgKz0gc3ByaW50ZihwLCAiRElNTSBsb2NhdGlv
bjolcyAlcyAiLCBiYW5rLCBkZXZpY2UpOw0KLQkJZWxzZQ0KLQkJCXAgKz0gc3ByaW50ZihwLCAi
RElNTSBETUkgaGFuZGxlOiAweCUuNHggIiwNCi0JCQkJICAgICBtZW1fZXJyLT5tZW1fZGV2X2hh
bmRsZSk7DQotDQotCQlpbmRleCA9IGdldF9kaW1tX3NtYmlvc19pbmRleChtY2ksIG1lbV9lcnIt
Pm1lbV9kZXZfaGFuZGxlKTsNCi0JCWlmIChpbmRleCA+PSAwKQ0KLQkJCWUtPnRvcF9sYXllciA9
IGluZGV4Ow0KKwkJcCArPSBzcHJpbnRmKHAsICJoYW5kbGU6MHglLjR4ICIsIGhhbmRsZSk7DQog
CX0NCi0JaWYgKHAgPiBlLT5sb2NhdGlvbikNCi0JCSoocCAtIDEpID0gJ1wwJzsNCi0NCi0JLyog
QWxsIG90aGVyIGZpZWxkcyBhcmUgbWFwcGVkIG9uIGUtPm90aGVyX2RldGFpbCAqLw0KLQlwID0g
cHZ0LT5vdGhlcl9kZXRhaWw7DQotCXAgKz0gc25wcmludGYocCwgc2l6ZW9mKHB2dC0+b3RoZXJf
ZGV0YWlsKSwNCi0JCSJBUEVJIGxvY2F0aW9uOiAlcyAiLCBlLT5sb2NhdGlvbik7DQogCWlmICht
ZW1fZXJyLT52YWxpZGF0aW9uX2JpdHMgJiBDUEVSX01FTV9WQUxJRF9FUlJPUl9TVEFUVVMpIHsN
CiAJCXU2NCBzdGF0dXMgPSBtZW1fZXJyLT5lcnJvcl9zdGF0dXM7DQogDQpAQCAtNzQ5LDExICs3
NDAsMTQgQEAgZ2hlc19lZGFjX3JlZ2lzdGVyX29uZShpbnQgbmlkLCBzdHJ1Y3QgZ2hlcyAqZ2hl
cywgc3RydWN0IGRldmljZSAqcGFyZW50KQ0KIAlzdHJ1Y3QgZ2hlc19lZGFjX3B2dCAqZ2hlc19w
dnQ7DQogCWludCByYzsNCiAJc3RydWN0IG1lbV9jdGxfaW5mbyAqbWNpOw0KLQlzdHJ1Y3QgZWRh
Y19tY19sYXllciBsYXllcnNbMV07DQorCXN0cnVjdCBlZGFjX21jX2xheWVyIGxheWVyc1syXTsN
CiANCi0JbGF5ZXJzWzBdLnR5cGUgPSBFREFDX01DX0xBWUVSX0FMTF9NRU07DQorCWxheWVyc1sw
XS50eXBlID0gRURBQ19NQ19MQVlFUl9DQVJEOw0KIAlsYXllcnNbMF0uc2l6ZSA9IDA7DQotCWxh
eWVyc1swXS5pc192aXJ0X2Nzcm93ID0gdHJ1ZTsNCisJbGF5ZXJzWzBdLmlzX3ZpcnRfY3Nyb3cg
PSBmYWxzZTsNCisJbGF5ZXJzWzFdLnR5cGUgPSBFREFDX01DX0xBWUVSX01PRFVMRTsNCisJbGF5
ZXJzWzFdLnNpemUgPSAwOw0KKwlsYXllcnNbMV0uaXNfdmlydF9jc3JvdyA9IGZhbHNlOw0KIA0K
IAltY2kgPSBlZGFjX21jX2FsbG9jX2J5X2RpbW0obmlkLCBtZW1faW5mby5kaW1tc19wZXJfbm9k
ZVtuaWRdLA0KIAkJCQlBUlJBWV9TSVpFKGxheWVycyksIGxheWVycywNCmRpZmYgLS1naXQgYS9p
bmNsdWRlL2xpbnV4L2VkYWMuaCBiL2luY2x1ZGUvbGludXgvZWRhYy5oDQppbmRleCA0ZGNmMDc1
ZTlkZmYuLjQwZTdkYTczNWU0OCAxMDA2NDQNCi0tLSBhL2luY2x1ZGUvbGludXgvZWRhYy5oDQor
KysgYi9pbmNsdWRlL2xpbnV4L2VkYWMuaA0KQEAgLTMzNiw2ICszMzYsOCBAQCBlbnVtIGVkYWNf
bWNfbGF5ZXJfdHlwZSB7DQogCUVEQUNfTUNfTEFZRVJfU0xPVCwNCiAJRURBQ19NQ19MQVlFUl9D
SElQX1NFTEVDVCwNCiAJRURBQ19NQ19MQVlFUl9BTExfTUVNLA0KKwlFREFDX01DX0xBWUVSX0NB
UkQsCQkvKiBTTUJJT1MgVHlwZSAxNiBNZW1vcnkgQXJyYXkgKi8NCisJRURBQ19NQ19MQVlFUl9N
T0RVTEUsCQkvKiBTTUJJT1MgVHlwZSAxNyBNZW1vcnkgRGV2aWNlICovDQogfTsNCiANCiAvKioN
Ci0tIA0KMi4yMC4xDQoNCg==
