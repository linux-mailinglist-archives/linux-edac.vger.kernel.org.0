Return-Path: <linux-edac-owner@vger.kernel.org>
X-Original-To: lists+linux-edac@lfdr.de
Delivered-To: lists+linux-edac@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id CBFD82D811
	for <lists+linux-edac@lfdr.de>; Wed, 29 May 2019 10:45:14 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726968AbfE2IpC (ORCPT <rfc822;lists+linux-edac@lfdr.de>);
        Wed, 29 May 2019 04:45:02 -0400
Received: from mx0b-0016f401.pphosted.com ([67.231.156.173]:49778 "EHLO
        mx0b-0016f401.pphosted.com" rhost-flags-OK-OK-OK-OK)
        by vger.kernel.org with ESMTP id S1726944AbfE2IpC (ORCPT
        <rfc822;linux-edac@vger.kernel.org>);
        Wed, 29 May 2019 04:45:02 -0400
Received: from pps.filterd (m0045851.ppops.net [127.0.0.1])
        by mx0b-0016f401.pphosted.com (8.16.0.27/8.16.0.27) with SMTP id x4T8isC6022021;
        Wed, 29 May 2019 01:44:55 -0700
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=marvell.com; h=from : to : cc :
 subject : date : message-id : references : in-reply-to : content-type :
 content-transfer-encoding : mime-version; s=pfpt0818;
 bh=dpQEqX+Tz0FmEJnIkWCsiP+ALItrYn6fkOWFHNnuN6I=;
 b=LK58nhB4IrykW5wi8qfhvqCDhD6Kz8JQhGjRcV3PpJUeOqAo80IOKj1ybDj5HhflJKbR
 D0jVKe0ckVxPWLPchmSGO6NVrFY+DVBSra0fsJyIPYZ/GAqaHqVw4tlRjxaNe01qXCxP
 P5ECsi9Lv1Jkize4HGL5ScBaFY3b0HChwqWkADCkOf59Ph4+HdIdWNy4/eZzG8gZZoyI
 C3P58a3fQgZnN/6S1W7QnjdHTgY2U+uVsXHhxAtMD4sy6TZZqm6N8139PHQacRIN0RpA
 3ggF3t59coUb+z1U54PWfvk+oFBwFEERqftQUtXEWavbEw9sYvkhhKed67f0OdR0zKxM YA== 
Received: from sc-exch02.marvell.com ([199.233.58.182])
        by mx0b-0016f401.pphosted.com with ESMTP id 2sskp88p7b-1
        (version=TLSv1.2 cipher=ECDHE-RSA-AES256-SHA384 bits=256 verify=NOT);
        Wed, 29 May 2019 01:44:54 -0700
Received: from SC-EXCH03.marvell.com (10.93.176.83) by SC-EXCH02.marvell.com
 (10.93.176.82) with Microsoft SMTP Server (TLS) id 15.0.1367.3; Wed, 29 May
 2019 01:44:49 -0700
Received: from NAM03-CO1-obe.outbound.protection.outlook.com (104.47.40.58) by
 SC-EXCH03.marvell.com (10.93.176.83) with Microsoft SMTP Server (TLS) id
 15.0.1367.3 via Frontend Transport; Wed, 29 May 2019 01:44:49 -0700
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=marvell.onmicrosoft.com; s=selector2-marvell-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=dpQEqX+Tz0FmEJnIkWCsiP+ALItrYn6fkOWFHNnuN6I=;
 b=RkXgIgXXbkTlPMPUupB9knnAVJWuhVOFpWNLHkb8xLLwP/uojJs3P4hEY+TsR0joMtF8huMzSeomMthtm9mNDolabfdvj6bUMcADC4NaLImEvm+b4kyTKqTUJkH3KAsRP3alfAIru7kW4Lw+uiDRPxX6d7YDx8lhyxFpBva7wTQ=
Received: from MN2PR18MB3408.namprd18.prod.outlook.com (10.255.238.217) by
 MN2PR18MB3437.namprd18.prod.outlook.com (10.255.239.22) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.1922.20; Wed, 29 May 2019 08:44:48 +0000
Received: from MN2PR18MB3408.namprd18.prod.outlook.com
 ([fe80::7c9a:f3bf:fe2e:fe4a]) by MN2PR18MB3408.namprd18.prod.outlook.com
 ([fe80::7c9a:f3bf:fe2e:fe4a%4]) with mapi id 15.20.1922.021; Wed, 29 May 2019
 08:44:48 +0000
From:   Robert Richter <rrichter@marvell.com>
To:     Borislav Petkov <bp@alien8.de>, Tony Luck <tony.luck@intel.com>,
        "James Morse" <james.morse@arm.com>,
        Mauro Carvalho Chehab <mchehab@kernel.org>
CC:     "linux-edac@vger.kernel.org" <linux-edac@vger.kernel.org>,
        "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>,
        Robert Richter <rrichter@marvell.com>
Subject: [PATCH 20/21] EDAC, ghes: Enable per-layer reporting based on
 card/module
Thread-Topic: [PATCH 20/21] EDAC, ghes: Enable per-layer reporting based on
 card/module
Thread-Index: AQHVFfrFZJH+3Ckua0Ku/1mj0fm9LA==
Date:   Wed, 29 May 2019 08:44:47 +0000
Message-ID: <20190529084344.28562-21-rrichter@marvell.com>
References: <20190529084344.28562-1-rrichter@marvell.com>
In-Reply-To: <20190529084344.28562-1-rrichter@marvell.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: AM6PR01CA0046.eurprd01.prod.exchangelabs.com
 (2603:10a6:20b:e0::23) To MN2PR18MB3408.namprd18.prod.outlook.com
 (2603:10b6:208:16c::25)
x-ms-exchange-messagesentrepresentingtype: 1
x-mailer: git-send-email 2.20.1
x-originating-ip: [78.54.13.57]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: e12dfd8d-1c96-405b-9c9f-08d6e411e7e3
x-microsoft-antispam: BCL:0;PCL:0;RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(2017052603328)(7193020);SRVR:MN2PR18MB3437;
x-ms-traffictypediagnostic: MN2PR18MB3437:
x-microsoft-antispam-prvs: <MN2PR18MB343765FB4503C5F9725ED845D91F0@MN2PR18MB3437.namprd18.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:4125;
x-forefront-prvs: 0052308DC6
x-forefront-antispam-report: SFV:NSPM;SFS:(10009020)(366004)(346002)(396003)(376002)(39860400002)(136003)(189003)(199004)(8936002)(4326008)(53936002)(50226002)(110136005)(107886003)(68736007)(36756003)(5660300002)(54906003)(11346002)(26005)(186003)(52116002)(2906002)(2616005)(476003)(446003)(6506007)(14454004)(66476007)(25786009)(478600001)(386003)(86362001)(486006)(81166006)(81156014)(8676002)(305945005)(316002)(7736002)(14444005)(256004)(99286004)(76176011)(6512007)(6436002)(73956011)(64756008)(66446008)(66556008)(66066001)(3846002)(66946007)(1076003)(6486002)(102836004)(71190400001)(71200400001)(6116002);DIR:OUT;SFP:1101;SCL:1;SRVR:MN2PR18MB3437;H:MN2PR18MB3408.namprd18.prod.outlook.com;FPR:;SPF:None;LANG:en;PTR:InfoNoRecords;MX:1;A:1;
received-spf: None (protection.outlook.com: marvell.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: w2d1BTM5fPjQ4IN34JokgCugWGamPxQWWlRyoYCCDNeFOuvS5D3ekywVvlzLJFS3tm+W82GzEbVew/TTC2NUaVMHzUbE2UTr+IqfCpa+ftX/ctvirZ2wyeifU9gnSzj9DUTssna4YrktrwBjqa4B22+/i/i2gqOSTIsY6GSXAskqyWeu9WP9oP2cGmjOod4rOcmFRlaEmHlE42zlAPezsW7r4h8R14UxD3g3kcLme4c5R4G6u4fpDvInRN8zYbIjiE8vpQxTwFK6ONgSfcyEQ0iMlE4LNWNeXx3fNM7+7CGjSERvFi1lSlxRM1vAv6r5h03/8r72ejMI18v26IsD0Subn3v85XlvODm/Z0fwwGMNMZhzDG8bUdK9BH7+Fe+rQ9yJoO8CPUubmA8lMIX8eHfrd8ZIoY584kGL+qRuA00=
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-MS-Exchange-CrossTenant-Network-Message-Id: e12dfd8d-1c96-405b-9c9f-08d6e411e7e3
X-MS-Exchange-CrossTenant-originalarrivaltime: 29 May 2019 08:44:47.9097
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 70e1fb47-1155-421d-87fc-2e58f638b6e0
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: rrichter@marvell.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR18MB3437
X-OriginatorOrg: marvell.com
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10434:,, definitions=2019-05-29_05:,,
 signatures=0
Sender: linux-edac-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-edac.vger.kernel.org>
X-Mailing-List: linux-edac@vger.kernel.org

VGhpcyBwYXRjaCBlbmFibGVzIHBlci1sYXllciByZXBvcnRpbmcgb2YgdGhlIEdIRVMgZHJpdmVy
IGJhc2VkIG9uDQpub2RlLCBjYXJkIGFuZCBtb2R1bGUuIEEgZGltbSBjYW4gYmUgdW5pcXVlbHkg
aWRlbnRpZmllZCBieSB0aG9zZSAzDQppZGVudGlmaWVycy4gVGhlIG1jIGRldmljZSBpcyBzZWxl
Y3RlZCBieSB0aGUgbm9kZSBpZC4gVGh1cywgZWFjaCBnaGVzDQplZGFjIG1lbW9yeSBjb250cm9s
bGVyIGRldmljZSBoYXMgYSAyLWRpbWVuc2lvbmFsIGxheWVyIGhpZXJhcmNoeQ0KYmFzZWQgb24g
Y2FyZCBhbmQgbW9kdWxlIGluIHRoZSBzYW1lIHdheSBhcyBtb3N0IG90aGVyIGRyaXZlciBoYXZl
LiBBbg0KZXJyb3IgbG9nIGxvb2tzIGFzIGZvbGxvd3Mgbm93Og0KDQpbIDg5MDIuNTkyMDYwXSB7
NH1bSGFyZHdhcmUgRXJyb3JdOiAgRXJyb3IgNiwgdHlwZTogY29ycmVjdGVkDQpbIDg5MDIuNTk3
NTM0XSB7NH1bSGFyZHdhcmUgRXJyb3JdOiAgIHNlY3Rpb25fdHlwZTogbWVtb3J5IGVycm9yDQpb
IDg5MDIuNjAzMjY3XSB7NH1bSGFyZHdhcmUgRXJyb3JdOiAgIGVycm9yX3N0YXR1czogMHgwMDAw
MDAwMDAwMDAwNDAwDQpbIDg5MDIuNjA5NTIyXSB7NH1bSGFyZHdhcmUgRXJyb3JdOiAgIHBoeXNp
Y2FsX2FkZHJlc3M6IDB4MDAwMDAwYjNiYjdkMzAwMA0KWyA4OTAyLjYxNjEyNl0gezR9W0hhcmR3
YXJlIEVycm9yXTogICBub2RlOiAxIGNhcmQ6IDMgbW9kdWxlOiAwIHJhbms6IDEgYmFuazogNzcx
IGNvbHVtbjogMTQgYml0X3Bvc2l0aW9uOiAxNg0KWyA4OTAyLjYyNTg1NF0gezR9W0hhcmR3YXJl
IEVycm9yXTogICBESU1NIGxvY2F0aW9uOiBOMSBESU1NX0wwDQpbIDg5MDIuODA3NzgzXSBFREFD
IE1DMTogMSBDRSBnaGVzX21jIG9uIE4xIERJTU1fTDAgKGNhcmQ6MyBtb2R1bGU6MCBwYWdlOjB4
YjNiYjdkMyBvZmZzZXQ6MHgwIGdyYWluOjAgc3luZHJvbWU6MHgwIC0gQVBFSSBsb2NhdGlvbjog
bm9kZToxIGNhcmQ6MyBtb2R1bGU6MCByYW5rOjEgYmFuazo3NzEgY29sOjE0IGJpdF9wb3M6MTYg
aGFuZGxlOjB4MDA1MiBzdGF0dXMoMHgwMDAwMDAwMDAwMDAwNDAwKTogU3RvcmFnZSBlcnJvciBp
biBEUkFNIG1lbW9yeSkNCg0KR0hFUyBlcnJvciByZXBvcnRzIGFyZSBub3cgc2ltaWxhciB0byBl
ZGFjX21jIHJlcG9ydHMuIFRoaXMgcGF0Y2gNCm1vdmVzIGNvbW1vbiBjb2RlIG9mIGdoZXMgYW5k
IGVkYWNfbWMgdG8gZWRhY19yYXdfbWNfaGFuZGxlX2Vycm9yKCkuDQoNClNpZ25lZC1vZmYtYnk6
IFJvYmVydCBSaWNodGVyIDxycmljaHRlckBtYXJ2ZWxsLmNvbT4NCi0tLQ0KIGRyaXZlcnMvZWRh
Yy9lZGFjX21jLmMgICB8IDQ1ICsrKysrKysrKysrKysrLS0tLS0tLS0tLQ0KIGRyaXZlcnMvZWRh
Yy9naGVzX2VkYWMuYyB8IDc2ICsrKysrKysrKysrKysrKysrKy0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0NCiBpbmNsdWRlL2xpbnV4L2VkYWMuaCAgICAgfCAgMiArKw0KIDMgZmlsZXMgY2hhbmdlZCwg
NjMgaW5zZXJ0aW9ucygrKSwgNjAgZGVsZXRpb25zKC0pDQoNCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2VkYWMvZWRhY19tYy5jIGIvZHJpdmVycy9lZGFjL2VkYWNfbWMuYw0KaW5kZXggYmRlYjlmZDA4
MjQ5Li5jMTU5YmIzYzc3ZTAgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2VkYWMvZWRhY19tYy5jDQor
KysgYi9kcml2ZXJzL2VkYWMvZWRhY19tYy5jDQpAQCAtOTE1LDExICs5MTUsMTMgQEAgaW50IGVk
YWNfbWNfZmluZF9jc3Jvd19ieV9wYWdlKHN0cnVjdCBtZW1fY3RsX2luZm8gKm1jaSwgdW5zaWdu
ZWQgbG9uZyBwYWdlKQ0KIEVYUE9SVF9TWU1CT0xfR1BMKGVkYWNfbWNfZmluZF9jc3Jvd19ieV9w
YWdlKTsNCiANCiBjb25zdCBjaGFyICplZGFjX2xheWVyX25hbWVbXSA9IHsNCi0JW0VEQUNfTUNf
TEFZRVJfQlJBTkNIXSA9ICJicmFuY2giLA0KLQlbRURBQ19NQ19MQVlFUl9DSEFOTkVMXSA9ICJj
aGFubmVsIiwNCi0JW0VEQUNfTUNfTEFZRVJfU0xPVF0gPSAic2xvdCIsDQotCVtFREFDX01DX0xB
WUVSX0NISVBfU0VMRUNUXSA9ICJjc3JvdyIsDQotCVtFREFDX01DX0xBWUVSX0FMTF9NRU1dID0g
Im1lbW9yeSIsDQorCVtFREFDX01DX0xBWUVSX0JSQU5DSF0JCT0gImJyYW5jaCIsDQorCVtFREFD
X01DX0xBWUVSX0NIQU5ORUxdCQk9ICJjaGFubmVsIiwNCisJW0VEQUNfTUNfTEFZRVJfU0xPVF0J
CT0gInNsb3QiLA0KKwlbRURBQ19NQ19MQVlFUl9DSElQX1NFTEVDVF0JPSAiY3Nyb3ciLA0KKwlb
RURBQ19NQ19MQVlFUl9BTExfTUVNXQkJPSAibWVtb3J5IiwNCisJW0VEQUNfTUNfTEFZRVJfQ0FS
RF0JCT0gImNhcmQiLA0KKwlbRURBQ19NQ19MQVlFUl9NT0RVTEVdCQk9ICJtb2R1bGUiLA0KIH07
DQogRVhQT1JUX1NZTUJPTF9HUEwoZWRhY19sYXllcl9uYW1lKTsNCiANCkBAIC0xMDQ2LDcgKzEw
NDgsMjYgQEAgdm9pZCBlZGFjX3Jhd19tY19oYW5kbGVfZXJyb3IoY29uc3QgZW51bSBod19ldmVu
dF9tY19lcnJfdHlwZSB0eXBlLA0KIAkJCSAgICAgIGludCByb3csIGludCBjaGFuKQ0KIHsNCiAJ
Y2hhciBkZXRhaWxbODBdOw0KKwlpbnQgaWR4Ow0KKwlpbnQgcG9zW0VEQUNfTUFYX0xBWUVSU10g
PSB7IGUtPnRvcF9sYXllciwgZS0+bWlkX2xheWVyLA0KKwkJCQkgICAgIGUtPmxvd19sYXllciB9
Ow0KIAl1OCBncmFpbl9iaXRzOw0KKwljaGFyICpwOw0KKw0KKwkvKiBGaWxsIHRoZSBSQU0gbG9j
YXRpb24gZGF0YSAqLw0KKwlwID0gZS0+bG9jYXRpb247DQorDQorCWZvciAoaWR4ID0gMDsgaWR4
IDwgbWNpLT5uX2xheWVyczsgaWR4KyspIHsNCisJCWlmIChwb3NbaWR4XSA8IDApDQorCQkJY29u
dGludWU7DQorDQorCQlwICs9IHNwcmludGYocCwgIiVzOiVkICIsDQorCQkJICAgICBlZGFjX2xh
eWVyX25hbWVbbWNpLT5sYXllcnNbaWR4XS50eXBlXSwNCisJCQkgICAgIHBvc1tpZHhdKTsNCisJ
fQ0KKw0KKwlpZiAocCA+IGUtPmxvY2F0aW9uKQ0KKwkJKihwIC0gMSkgPSAnXDAnOw0KIA0KIAkv
KiBSZXBvcnQgdGhlIGVycm9yIHZpYSB0aGUgdHJhY2UgaW50ZXJmYWNlICovDQogCWdyYWluX2Jp
dHMgPSBmbHNfbG9uZyhlLT5ncmFpbikgKyAxOw0KQEAgLTEyMjgsMjAgKzEyNDksNiBAQCB2b2lk
IGVkYWNfbWNfaGFuZGxlX2Vycm9yKGNvbnN0IGVudW0gaHdfZXZlbnRfbWNfZXJyX3R5cGUgdHlw
ZSwNCiAJZWxzZSBpZiAoISplLT5sYWJlbCkNCiAJCXN0cmNweShlLT5sYWJlbCwgInVua25vd24g
bWVtb3J5Iik7DQogDQotCS8qIEZpbGwgdGhlIFJBTSBsb2NhdGlvbiBkYXRhICovDQotCXAgPSBl
LT5sb2NhdGlvbjsNCi0NCi0JZm9yIChpID0gMDsgaSA8IG1jaS0+bl9sYXllcnM7IGkrKykgew0K
LQkJaWYgKHBvc1tpXSA8IDApDQotCQkJY29udGludWU7DQotDQotCQlwICs9IHNwcmludGYocCwg
IiVzOiVkICIsDQotCQkJICAgICBlZGFjX2xheWVyX25hbWVbbWNpLT5sYXllcnNbaV0udHlwZV0s
DQotCQkJICAgICBwb3NbaV0pOw0KLQl9DQotCWlmIChwID4gZS0+bG9jYXRpb24pDQotCQkqKHAg
LSAxKSA9ICdcMCc7DQotDQogCWRpbW0gPSBlZGFjX2dldF9kaW1tKG1jaSwgdG9wX2xheWVyLCBt
aWRfbGF5ZXIsIGxvd19sYXllcik7DQogDQogCWVkYWNfcmF3X21jX2hhbmRsZV9lcnJvcih0eXBl
LCBtY2ksIGRpbW0sIGUsIHJvdywgY2hhbik7DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9lZGFjL2do
ZXNfZWRhYy5jIGIvZHJpdmVycy9lZGFjL2doZXNfZWRhYy5jDQppbmRleCAwN2M4NDdlZDczMTUu
LjY3ZTk2MjE1OTY1MyAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZWRhYy9naGVzX2VkYWMuYw0KKysr
IGIvZHJpdmVycy9lZGFjL2doZXNfZWRhYy5jDQpAQCAtMTY3LDE4ICsxNjcsNiBAQCBzdGF0aWMg
dm9pZCBnaGVzX2VkYWNfc2V0X25pZChjb25zdCBzdHJ1Y3QgZG1pX2hlYWRlciAqZGgsIHZvaWQg
KmFyZykNCiAJfQ0KIH0NCiANCi1zdGF0aWMgaW50IGdldF9kaW1tX3NtYmlvc19pbmRleChzdHJ1
Y3QgbWVtX2N0bF9pbmZvICptY2ksIHUxNiBoYW5kbGUpDQotew0KLQlzdHJ1Y3QgZGltbV9pbmZv
ICpkaW1tOw0KLQ0KLQltY2lfZm9yX2VhY2hfZGltbShtY2ksIGRpbW0pIHsNCi0JCWlmIChkaW1t
LT5zbWJpb3NfaGFuZGxlID09IGhhbmRsZSkNCi0JCQlyZXR1cm4gZGltbS0+aWR4Ow0KLQl9DQot
DQotCXJldHVybiAtMTsNCi19DQotDQogc3RhdGljIHZvaWQgZ2hlc19lZGFjX2RtaWRlY29kZShj
b25zdCBzdHJ1Y3QgZG1pX2hlYWRlciAqZGgsIHZvaWQgKmFyZykNCiB7DQogCWlmIChkaC0+dHlw
ZSA9PSBETUlfRU5UUllfTUVNX0RFVklDRSkgew0KQEAgLTUwNiwxMCArNDk0LDEyIEBAIHZvaWQg
Z2hlc19lZGFjX3JlcG9ydF9tZW1fZXJyb3IoaW50IHNldiwgc3RydWN0IGNwZXJfc2VjX21lbV9l
cnIgKm1lbV9lcnIpDQogCXB2dCA9IG1jaS0+cHZ0X2luZm87DQogCWUgPSAmbWNpLT5lcnJvcl9k
ZXNjOw0KIA0KKwllZGFjX2RiZygzLCAiTUMlZFxuIiwgbWNpLT5tY19pZHgpOw0KKw0KIAkvKiBD
bGVhbnMgdGhlIGVycm9yIHJlcG9ydCBidWZmZXIgKi8NCiAJbWVtc2V0KGUsIDAsIHNpemVvZiAo
KmUpKTsNCisNCiAJZS0+ZXJyb3JfY291bnQgPSAxOw0KLQlzdHJjcHkoZS0+bGFiZWwsICJ1bmtu
b3duIGxhYmVsIik7DQogCWUtPnRvcF9sYXllciA9IC0xOw0KIAllLT5taWRfbGF5ZXIgPSAtMTsN
CiAJZS0+bG93X2xheWVyID0gLTE7DQpAQCAtNTE5LDYgKzUwOSwyNSBAQCB2b2lkIGdoZXNfZWRh
Y19yZXBvcnRfbWVtX2Vycm9yKGludCBzZXYsIHN0cnVjdCBjcGVyX3NlY19tZW1fZXJyICptZW1f
ZXJyKQ0KIAkqcHZ0LT5tc2cgPSAnXDAnOw0KIAkqcHZ0LT5vdGhlcl9kZXRhaWwgPSAnXDAnOw0K
IA0KKwlpZiAoZGltbSkgew0KKwkJLyogVGhlIERJTU0gY291bGQgYmUgaWRlbnRpZmllZC4gKi8N
CisJCWUtPnRvcF9sYXllciA9IGRpbW0tPmNhcmQ7DQorCQllLT5taWRfbGF5ZXIgPSBkaW1tLT5t
b2R1bGU7DQorCQlzdHJjcHkoZS0+bGFiZWwsIGRpbW0tPmRpbW0tPmxhYmVsKTsNCisJfSBlbHNl
IGlmIChuaWQgPj0gMCB8fCBjYXJkID49IDAgfHwgbW9kdWxlID49IDAgfHwgaGFuZGxlID49IDAp
IHsNCisJCS8qDQorCQkgKiBXZSBoYXZlIGF0IGxlYXN0IHNvbWUgaW5mb3JtYXRpb24gYW5kIGNh
biBkbyBhDQorCQkgKiBwZXItbGF5ZXIgcmVwb3J0aW5nLCBidXQgdGhlIGV4YWN0IGxvY2F0aW9u
IGlzDQorCQkgKiB1bmtub3duLg0KKwkJICovDQorCQllLT50b3BfbGF5ZXIgPSBjYXJkOw0KKwkJ
ZS0+bWlkX2xheWVyID0gbW9kdWxlOw0KKwkJc3RyY3B5KGUtPmxhYmVsLCAidW5rbm93biBtZW1v
cnkiKTsNCisJfSBlbHNlIHsNCisJCS8qIE5vIGVycm9yIGxvY2F0aW9uIGF0IGFsbC4gKi8NCisJ
CXN0cmNweShlLT5sYWJlbCwgImFueSBtZW1vcnkiKTsNCisJfQ0KKw0KIAlzd2l0Y2ggKHNldikg
ew0KIAljYXNlIEdIRVNfU0VWX0NPUlJFQ1RFRDoNCiAJCXR5cGUgPSBIV19FVkVOVF9FUlJfQ09S
UkVDVEVEOw0KQEAgLTUzOCw4ICs1NDcsMTAgQEAgdm9pZCBnaGVzX2VkYWNfcmVwb3J0X21lbV9l
cnJvcihpbnQgc2V2LCBzdHJ1Y3QgY3Blcl9zZWNfbWVtX2VyciAqbWVtX2VycikNCiAJCSAobG9u
ZyBsb25nKW1lbV9lcnItPnZhbGlkYXRpb25fYml0cyk7DQogDQogCS8qIEVycm9yIHR5cGUsIG1h
cHBlZCBvbiBlLT5tc2cgKi8NCisJcCA9IHB2dC0+bXNnOw0KKwlwICs9IHNwcmludGYocCwgIiVz
IiwgbWNpLT5jdGxfbmFtZSk7DQogCWlmIChtZW1fZXJyLT52YWxpZGF0aW9uX2JpdHMgJiBDUEVS
X01FTV9WQUxJRF9FUlJPUl9UWVBFKSB7DQotCQlwID0gcHZ0LT5tc2c7DQorCQlwICs9IHNwcmlu
dGYocCwgIjogIik7DQogCQlzd2l0Y2ggKG1lbV9lcnItPmVycm9yX3R5cGUpIHsNCiAJCWNhc2Ug
MDoNCiAJCQlwICs9IHNwcmludGYocCwgIlVua25vd24iKTsNCkBAIC01OTMsOCArNjA0LDYgQEAg
dm9pZCBnaGVzX2VkYWNfcmVwb3J0X21lbV9lcnJvcihpbnQgc2V2LCBzdHJ1Y3QgY3Blcl9zZWNf
bWVtX2VyciAqbWVtX2VycikNCiAJCQlwICs9IHNwcmludGYocCwgInJlc2VydmVkIGVycm9yICgl
ZCkiLA0KIAkJCQkgICAgIG1lbV9lcnItPmVycm9yX3R5cGUpOw0KIAkJfQ0KLQl9IGVsc2Ugew0K
LQkJc3RyY3B5KHB2dC0+bXNnLCAidW5rbm93biBlcnJvciIpOw0KIAl9DQogDQogCS8qIEVycm9y
IGFkZHJlc3MgKi8NCkBAIC02MDcsOCArNjE2LDkgQEAgdm9pZCBnaGVzX2VkYWNfcmVwb3J0X21l
bV9lcnJvcihpbnQgc2V2LCBzdHJ1Y3QgY3Blcl9zZWNfbWVtX2VyciAqbWVtX2VycikNCiAJaWYg
KG1lbV9lcnItPnZhbGlkYXRpb25fYml0cyAmIENQRVJfTUVNX1ZBTElEX1BBX01BU0spDQogCQll
LT5ncmFpbiA9IH4obWVtX2Vyci0+cGh5c2ljYWxfYWRkcl9tYXNrICYgflBBR0VfTUFTSyk7DQog
DQotCS8qIE1lbW9yeSBlcnJvciBsb2NhdGlvbiwgbWFwcGVkIG9uIGUtPmxvY2F0aW9uICovDQot
CXAgPSBlLT5sb2NhdGlvbjsNCisJLyogTWVtb3J5IGVycm9yIGxvY2F0aW9uLCBtYXBwZWQgb24g
ZS0+b3RoZXJfZGV0YWlsICovDQorCXAgPSBwdnQtPm90aGVyX2RldGFpbDsNCisJcCArPSBzbnBy
aW50ZihwLCBzaXplb2YocHZ0LT5vdGhlcl9kZXRhaWwpLCAiQVBFSSBsb2NhdGlvbjogIik7DQog
CWlmIChtZW1fZXJyLT52YWxpZGF0aW9uX2JpdHMgJiBDUEVSX01FTV9WQUxJRF9OT0RFKQ0KIAkJ
cCArPSBzcHJpbnRmKHAsICJub2RlOiVkICIsIG1lbV9lcnItPm5vZGUpOw0KIAlpZiAobWVtX2Vy
ci0+dmFsaWRhdGlvbl9iaXRzICYgQ1BFUl9NRU1fVkFMSURfQ0FSRCkNCkBAIC02MjYsMjcgKzYz
Niw4IEBAIHZvaWQgZ2hlc19lZGFjX3JlcG9ydF9tZW1fZXJyb3IoaW50IHNldiwgc3RydWN0IGNw
ZXJfc2VjX21lbV9lcnIgKm1lbV9lcnIpDQogCWlmIChtZW1fZXJyLT52YWxpZGF0aW9uX2JpdHMg
JiBDUEVSX01FTV9WQUxJRF9CSVRfUE9TSVRJT04pDQogCQlwICs9IHNwcmludGYocCwgImJpdF9w
b3M6JWQgIiwgbWVtX2Vyci0+Yml0X3Bvcyk7DQogCWlmIChtZW1fZXJyLT52YWxpZGF0aW9uX2Jp
dHMgJiBDUEVSX01FTV9WQUxJRF9NT0RVTEVfSEFORExFKSB7DQotCQljb25zdCBjaGFyICpiYW5r
ID0gTlVMTCwgKmRldmljZSA9IE5VTEw7DQotCQlpbnQgaW5kZXggPSAtMTsNCi0NCi0JCWRtaV9t
ZW1kZXZfbmFtZShtZW1fZXJyLT5tZW1fZGV2X2hhbmRsZSwgJmJhbmssICZkZXZpY2UpOw0KLQkJ
aWYgKGJhbmsgIT0gTlVMTCAmJiBkZXZpY2UgIT0gTlVMTCkNCi0JCQlwICs9IHNwcmludGYocCwg
IkRJTU0gbG9jYXRpb246JXMgJXMgIiwgYmFuaywgZGV2aWNlKTsNCi0JCWVsc2UNCi0JCQlwICs9
IHNwcmludGYocCwgIkRJTU0gRE1JIGhhbmRsZTogMHglLjR4ICIsDQotCQkJCSAgICAgbWVtX2Vy
ci0+bWVtX2Rldl9oYW5kbGUpOw0KLQ0KLQkJaW5kZXggPSBnZXRfZGltbV9zbWJpb3NfaW5kZXgo
bWNpLCBtZW1fZXJyLT5tZW1fZGV2X2hhbmRsZSk7DQotCQlpZiAoaW5kZXggPj0gMCkNCi0JCQll
LT50b3BfbGF5ZXIgPSBpbmRleDsNCisJCXAgKz0gc3ByaW50ZihwLCAiaGFuZGxlOjB4JS40eCAi
LCBoYW5kbGUpOw0KIAl9DQotCWlmIChwID4gZS0+bG9jYXRpb24pDQotCQkqKHAgLSAxKSA9ICdc
MCc7DQotDQotCS8qIEFsbCBvdGhlciBmaWVsZHMgYXJlIG1hcHBlZCBvbiBlLT5vdGhlcl9kZXRh
aWwgKi8NCi0JcCA9IHB2dC0+b3RoZXJfZGV0YWlsOw0KLQlwICs9IHNucHJpbnRmKHAsIHNpemVv
ZihwdnQtPm90aGVyX2RldGFpbCksDQotCQkiQVBFSSBsb2NhdGlvbjogJXMgIiwgZS0+bG9jYXRp
b24pOw0KIAlpZiAobWVtX2Vyci0+dmFsaWRhdGlvbl9iaXRzICYgQ1BFUl9NRU1fVkFMSURfRVJS
T1JfU1RBVFVTKSB7DQogCQl1NjQgc3RhdHVzID0gbWVtX2Vyci0+ZXJyb3Jfc3RhdHVzOw0KIA0K
QEAgLTc1NCwxMSArNzQ1LDE0IEBAIGdoZXNfZWRhY19yZWdpc3Rlcl9vbmUoaW50IG5pZCwgc3Ry
dWN0IGdoZXMgKmdoZXMsIHN0cnVjdCBkZXZpY2UgKnBhcmVudCkNCiAJc3RydWN0IGdoZXNfZWRh
Y19wdnQgKmdoZXNfcHZ0Ow0KIAlpbnQgcmM7DQogCXN0cnVjdCBtZW1fY3RsX2luZm8gKm1jaTsN
Ci0Jc3RydWN0IGVkYWNfbWNfbGF5ZXIgbGF5ZXJzWzFdOw0KKwlzdHJ1Y3QgZWRhY19tY19sYXll
ciBsYXllcnNbMl07DQogDQotCWxheWVyc1swXS50eXBlID0gRURBQ19NQ19MQVlFUl9BTExfTUVN
Ow0KKwlsYXllcnNbMF0udHlwZSA9IEVEQUNfTUNfTEFZRVJfQ0FSRDsNCiAJbGF5ZXJzWzBdLnNp
emUgPSAwOw0KLQlsYXllcnNbMF0uaXNfdmlydF9jc3JvdyA9IHRydWU7DQorCWxheWVyc1swXS5p
c192aXJ0X2Nzcm93ID0gZmFsc2U7DQorCWxheWVyc1sxXS50eXBlID0gRURBQ19NQ19MQVlFUl9N
T0RVTEU7DQorCWxheWVyc1sxXS5zaXplID0gMDsNCisJbGF5ZXJzWzFdLmlzX3ZpcnRfY3Nyb3cg
PSBmYWxzZTsNCiANCiAJbWNpID0gZWRhY19tY19hbGxvY19ieV9kaW1tKG5pZCwgbWVtX2luZm8u
bnVtX3Blcl9ub2RlW25pZF0sDQogCQkJCUFSUkFZX1NJWkUobGF5ZXJzKSwgbGF5ZXJzLA0KZGlm
ZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvZWRhYy5oIGIvaW5jbHVkZS9saW51eC9lZGFjLmgNCmlu
ZGV4IDRkY2YwNzVlOWRmZi4uNDBlN2RhNzM1ZTQ4IDEwMDY0NA0KLS0tIGEvaW5jbHVkZS9saW51
eC9lZGFjLmgNCisrKyBiL2luY2x1ZGUvbGludXgvZWRhYy5oDQpAQCAtMzM2LDYgKzMzNiw4IEBA
IGVudW0gZWRhY19tY19sYXllcl90eXBlIHsNCiAJRURBQ19NQ19MQVlFUl9TTE9ULA0KIAlFREFD
X01DX0xBWUVSX0NISVBfU0VMRUNULA0KIAlFREFDX01DX0xBWUVSX0FMTF9NRU0sDQorCUVEQUNf
TUNfTEFZRVJfQ0FSRCwJCS8qIFNNQklPUyBUeXBlIDE2IE1lbW9yeSBBcnJheSAqLw0KKwlFREFD
X01DX0xBWUVSX01PRFVMRSwJCS8qIFNNQklPUyBUeXBlIDE3IE1lbW9yeSBEZXZpY2UgKi8NCiB9
Ow0KIA0KIC8qKg0KLS0gDQoyLjIwLjENCg0K
